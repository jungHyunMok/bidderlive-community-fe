<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <title>ë¹„ë”ë¼ì´ë¸Œ ì»¤ë®¤ë‹ˆí‹° MVP v9</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    :root {
      --bg: #05070d;
      --bg-soft: #0b1020;
      --card: #111827;
      --card-soft: #1f2937;
      --border: #1f2933;
      --accent: #ff3b69;
      --accent-soft: rgba(255, 59, 105, 0.12);
      --accent-strong: #ff4f7a;
      --text-main: #f9fafb;
      --text-sub: #9ca3af;
      --chip-bg: #111827;
      --chip-active: #f9fafb;
      --chip-active-bg: #ff3b69;
      --radius-lg: 16px;
      --radius-md: 999px;
      --shadow-soft: 0 18px 35px rgba(0, 0, 0, 0.65);
      --glass-bg: rgba(15, 23, 42, 0.6);
      --glass-border: rgba(148, 163, 184, 0.2);
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes scaleIn {
      from {
        opacity: 0;
        transform: scale(0.95);
      }

      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .animate-fade-in {
      animation: fadeIn 0.6s ease-out forwards;
    }

    .animate-slide-up {
      animation: slideUp 0.6s ease-out forwards;
    }

    .animate-scale-in {
      animation: scaleIn 0.5s ease-out forwards;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      background: radial-gradient(circle at top, #111827 0, #020308 55%);
      color: var(--text-main);
      min-height: 100vh;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    .hidden {
      display: none !important;
    }

    .hidden-by-category {
      display: none !important;
    }

    .hidden-by-search {
      display: none !important;
    }

    .hidden-by-type {
      display: none !important;
    }

    .hidden-by-block {
      display: none !important;
    }

    /* ë¡œê·¸ì¸ í˜ì´ì§€ */

    #login-page.page {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }

    .auth-card {
      width: 100%;
      max-width: 420px;
      background: radial-gradient(circle at top left, #1f2937, #020308 65%);
      border-radius: 24px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      padding: 32px 28px 28px;
      box-shadow: var(--shadow-soft);
    }

    .auth-card h1 {
      margin: 0 0 4px;
      font-size: 24px;
      letter-spacing: 0.04em;
    }

    .auth-logo {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid rgba(148, 163, 184, 0.4);
      margin-bottom: 10px;
    }

    .auth-card .subtitle {
      margin: 4px 0 24px;
      font-size: 13px;
      color: var(--text-sub);
    }

    label {
      display: block;
      font-size: 13px;
      margin-bottom: 8px;
      color: var(--text-sub);
    }

    label span.label-text {
      display: inline-block;
      margin-bottom: 4px;
    }

    input[type="email"],
    input[type="password"],
    input[type="text"],
    input[type="file"],
    select,
    textarea {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.95);
      color: var(--text-main);
      font-size: 14px;
      outline: none;
    }

    input::placeholder,
    textarea::placeholder {
      color: #6b7280;
    }

    input:focus,
    select:focus,
    textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(255, 59, 105, 0.4);
    }

    fieldset {
      border: none;
      padding: 0;
      margin: 0 0 14px;
    }

    fieldset legend {
      font-size: 13px;
      color: var(--text-sub);
      margin-bottom: 4px;
    }

    .role-row {
      display: flex;
      gap: 10px;
      font-size: 13px;
    }

    .role-row label {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.8);
      background: rgba(15, 23, 42, 0.8);
      cursor: pointer;
      margin: 0;
      color: var(--text-sub);
    }

    .role-row input[type="radio"] {
      accent-color: var(--accent);
    }

    .helper-text {
      font-size: 11px;
      color: var(--text-sub);
      margin-top: 4px;
      margin-bottom: 14px;
    }

    .primary-btn,
    .secondary-btn,
    .text-btn,
    .icon-btn {
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 14px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 9px 16px;
      font-weight: 500;
      transition: all 0.18s ease;
    }

    .primary-btn {
      background: linear-gradient(135deg, var(--accent), var(--accent-strong));
      color: #0b0b10;
      box-shadow: 0 12px 25px rgba(255, 59, 105, 0.35);
    }

    .primary-btn.full-width {
      width: 100%;
    }

    .primary-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 32px rgba(255, 59, 105, 0.45);
    }

    .secondary-btn {
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-main);
      border: 1px solid rgba(55, 65, 81, 0.9);
      padding-inline: 14px;
      font-size: 13px;
    }

    .secondary-btn:hover {
      background: rgba(31, 41, 55, 0.95);
    }

    .text-btn {
      background: transparent;
      color: var(--text-sub);
      padding-inline: 0;
    }

    .text-btn:hover {
      color: var(--accent-strong);
    }

    .icon-btn {
      background: rgba(15, 23, 42, 0.9);
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      font-size: 12px;
      padding: 4px 9px;
      color: var(--text-sub);
    }

    .icon-btn:hover {
      border-color: rgba(148, 163, 184, 0.9);
      color: var(--text-main);
    }

    .auth-footer {
      margin-top: 16px;
      display: flex;
      justify-content: space-between;
      font-size: 11px;
      color: var(--text-sub);
    }

    /* ì•± ë ˆì´ì•„ì›ƒ */

    #app {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .top-bar {
      position: sticky;
      top: 0;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 10px 18px;
      backdrop-filter: blur(20px);
      background: linear-gradient(to right, rgba(3, 7, 18, 0.85), rgba(15, 23, 42, 0.8));
      border-bottom: 1px solid rgba(31, 41, 55, 0.9);
    }

    .logo-and-nav {
      display: flex;
      align-items: center;
      gap: 18px;
      flex-shrink: 0;
    }

    .logo {
      display: flex;
      align-items: center;
    }

    .logo img {
      height: 32px;
      width: auto;
      display: block;
      object-fit: contain;
    }

    .main-nav {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    .nav-link {
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 13px;
      padding: 8px 13px;
      background: transparent;
      color: rgba(209, 213, 219, 0.9);
      border: 1px solid transparent;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .nav-link.active {
      background: rgba(15, 23, 42, 0.96);
      color: var(--chip-active);
      border-color: rgba(148, 163, 184, 0.9);
    }

    .nav-link:hover:not(.active) {
      background: rgba(15, 23, 42, 0.7);
    }

    .search-bar {
      flex: 1;
      max-width: 360px;
      display: flex;
      align-items: center;
    }

    .search-bar input {
      width: 100%;
      font-size: 13px;
      padding: 7px 11px;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.85);
      color: var(--text-main);
    }

    .search-bar input::placeholder {
      color: #6b7280;
    }

    .search-bar input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(255, 59, 105, 0.4);
      background: rgba(15, 23, 42, 0.98);
    }

    .user-area {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-shrink: 0;
    }

    .user-meta {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 2px;
    }

    .nickname-label {
      font-size: 13px;
    }

    .role-label {
      font-size: 11px;
      color: var(--text-sub);
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.9);
    }

    main {
      max-width: 1080px;
      width: 100%;
      margin: 14px auto 40px;
      padding-inline: 16px;
      flex: 1;
    }

    .page-section {
      margin-top: 10px;
    }

    .section-header {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-bottom: 16px;
    }

    .section-header h2 {
      margin: 0;
      font-size: 20px;
    }

    .section-subtitle {
      margin: 0;
      font-size: 13px;
      color: var(--text-sub);
    }

    .category-filter {
      margin-top: 10px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .chip {
      border-radius: var(--radius-md);
      font-size: 12px;
      padding: 6px 11px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: var(--chip-bg);
      color: var(--text-sub);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .chip.active {
      background: var(--chip-active-bg);
      color: #111827;
      border-color: transparent;
    }

    .chip.active::before {
      content: "â—";
      font-size: 8px;
    }

    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 16px;
    }

    .post-card {
      background: radial-gradient(circle at top left, #111827, #020308 70%);
      border-radius: var(--radius-lg);
      overflow: hidden;
      border: 1px solid rgba(30, 64, 175, 0.55);
      box-shadow: var(--shadow-soft);
      display: flex;
      flex-direction: column;
      min-height: 260px;
      position: relative;
      animation: slideUp 0.6s ease-out backwards;
    }

    .post-image {
      height: 180px;
      width: 100%;
      background-size: cover;
      background-position: center;
      background-color: #020617;
    }

    .post-body {
      padding: 12px 14px 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .post-meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      font-size: 11px;
    }

    .category-pill {
      padding: 3px 9px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(55, 65, 81, 0.9);
      color: rgba(209, 213, 219, 0.9);
    }

    .badge {
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 11px;
      font-weight: 600;
    }

    .badge-hit {
      background: var(--accent-soft);
      color: var(--accent-strong);
      border: 1px solid rgba(248, 113, 133, 0.7);
    }

    .post-title {
      margin: 0;
      font-size: 15px;
    }

    .post-desc {
      margin: 0;
      font-size: 13px;
      color: var(--text-sub);
    }

    .post-footer {
      margin-top: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
    }

    .user-inline {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .avatar-circle {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      background: radial-gradient(circle at top, #4b5563, #020617 75%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 600;
    }

    .user-inline .nickname {
      font-size: 13px;
    }

    .user-inline .sub {
      font-size: 11px;
      color: var(--text-sub);
    }

    .social-inline {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .like-btn[data-liked="true"] {
      background: var(--accent-soft);
      color: var(--accent-strong);
      border-color: rgba(248, 113, 133, 0.8);
    }

    .like-btn .like-icon {
      font-size: 14px;
    }

    .like-btn .like-count {
      font-variant-numeric: tabular-nums;
    }

    .owner-tools {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-top: 6px;
      font-size: 11px;
    }

    .owner-pill {
      padding: 2px 7px;
      border-radius: 999px;
      background: rgba(16, 185, 129, 0.15);
      border: 1px solid rgba(16, 185, 129, 0.7);
      color: #6ee7b7;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .owner-tools .text-btn {
      font-size: 11px;
      padding: 0 4px;
    }

    .small-helper {
      font-size: 11px;
      color: var(--text-sub);
      margin-top: 2px;
    }

    /* í™ˆ(ë©”ì¸) ì„¹ì…˜ */

    .home-hero {
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(0, 2fr);
      gap: 18px;
      margin-bottom: 18px;
    }

    .home-hero-card {
      background: radial-gradient(circle at top left, #111827, #020308 70%);
      border-radius: 22px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      padding: 18px 18px 16px;
      box-shadow: var(--shadow-soft);
      animation: fadeIn 0.8s ease-out;
    }

    .home-hero-title {
      font-size: 22px;
      margin: 0 0 6px;
    }

    .home-hero-sub {
      font-size: 13px;
      color: var(--text-sub);
      margin: 0 0 12px;
    }

    .home-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
    }

    .home-badge {
      font-size: 11px;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-sub);
    }

    .home-pill-link {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      font-size: 12px;
      padding: 6px 11px;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: rgba(15, 23, 42, 0.9);
      cursor: pointer;
      margin-right: 6px;
      margin-top: 4px;
    }

    .home-pill-link span.icon {
      font-size: 13px;
    }

    .home-hero-highlight {
      border-radius: 14px;
      padding: 8px 10px;
      margin-top: 8px;
      border: 1px dashed rgba(248, 250, 252, 0.25);
      font-size: 12px;
      color: var(--text-sub);
    }

    .home-hero-mini-title {
      font-size: 13px;
      margin-bottom: 6px;
      font-weight: 600;
    }

    .home-hero-item {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      font-size: 12px;
      padding: 4px 0;
    }

    .home-hero-item span.label {
      color: var(--text-sub);
    }

    .home-hero-item span.value {
      font-weight: 500;
    }

    .home-grid {
      display: grid;
      grid-template-columns: minmax(0, 2.5fr) minmax(0, 2fr);
      gap: 18px;
    }

    .tile {
      background: radial-gradient(circle at top left, #020617, #020308 75%);
      border-radius: 18px;
      border: 1px solid rgba(31, 41, 55, 0.9);
      padding: 14px 14px 12px;
      box-shadow: 0 14px 28px rgba(0, 0, 0, 0.6);
      animation: fadeIn 0.8s ease-out;
    }

    .tile-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 8px;
    }

    .tile-title {
      font-size: 14px;
      margin: 0;
    }

    .tile-sub {
      font-size: 12px;
      color: var(--text-sub);
      margin: 2px 0 0;
    }

    .tile-link {
      font-size: 11px;
      color: var(--accent-strong);
      cursor: pointer;
    }

    .notice-list,
    .rule-list {
      list-style: none;
      margin: 0;
      padding: 0;
      font-size: 12px;
    }

    .notice-item {
      padding: 6px 0;
      border-bottom: 1px solid rgba(31, 41, 55, 0.9);
    }

    .notice-item:last-child {
      border-bottom: none;
    }

    .notice-title {
      font-weight: 500;
    }

    .notice-meta {
      font-size: 11px;
      color: var(--text-sub);
    }

    .rule-item {
      padding: 4px 0;
      display: flex;
      gap: 6px;
    }

    .rule-index {
      font-size: 11px;
      color: var(--accent-strong);
      flex-shrink: 0;
      margin-top: 2px;
    }

    .rule-text {
      font-size: 12px;
      color: var(--text-sub);
    }

    .ad-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 10px;
      margin-top: 6px;
    }

    .ad-card {
      border-radius: 14px;
      padding: 10px 11px;
      background: linear-gradient(135deg, rgba(248, 250, 252, 0.04), rgba(15, 23, 42, 0.95));
      border: 1px solid rgba(75, 85, 99, 0.9);
      font-size: 12px;
    }

    .ad-tag {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(55, 65, 81, 0.9);
      margin-bottom: 4px;
    }

    .ad-title {
      font-size: 13px;
      margin-bottom: 2px;
    }

    .ad-desc {
      font-size: 11px;
      color: var(--text-sub);
    }

    /* ë©”ì¸ ì¸ë„¤ì¼ ê´‘ê³  ìŠ¤íŠ¸ë¦½ */

    .home-thumb-ads {
      margin-top: 18px;
    }

    .thumb-ad-strip {
      display: flex;
      gap: 12px;
      overflow-x: auto;
      padding-bottom: 4px;
      -webkit-overflow-scrolling: touch;
    }

    .thumb-ad-card {
      flex: 0 0 180px;
      border-radius: 16px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: radial-gradient(circle at top left, #020617, #020308 80%);
      padding: 8px 8px 10px;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.55);
      display: flex;
      flex-direction: column;
    }

    .thumb-ad-thumb {
      width: 100%;
      height: 100px;
      border-radius: 12px;
      background-size: cover;
      background-position: center;
      background-color: #020617;
      margin-bottom: 6px;
    }

    .thumb-ad-meta {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .thumb-ad-label {
      font-size: 10px;
      color: var(--text-sub);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .thumb-ad-title {
      font-size: 12px;
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* ìƒì„¸ í™”ë©´ */

    #detail-section .detail-wrapper {
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(0, 2.3fr);
      gap: 20px;
    }

    .detail-card {
      background: radial-gradient(circle at top left, #111827, #020308 65%);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(30, 64, 175, 0.6);
      overflow: hidden;
      box-shadow: var(--shadow-soft);
      display: flex;
      flex-direction: column;
      min-height: 320px;
    }

    .detail-image {
      height: 260px;
      background-size: cover;
      background-position: center;
      background-color: #020617;
    }

    .detail-content {
      padding: 14px 16px 14px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .detail-title {
      margin: 0;
      font-size: 18px;
    }

    .detail-desc {
      margin: 0;
      font-size: 13px;
      color: var(--text-sub);
    }

    .detail-body {
      margin: 4px 0 0;
      font-size: 13px;
      color: var(--text-main);
      white-space: pre-line;
    }

    .detail-actions {
      margin-top: 6px;
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
    }

    .comments-section {
      background: rgba(15, 23, 42, 0.95);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(31, 41, 55, 0.9);
      padding: 12px 14px;
      box-shadow: 0 12px 25px rgba(0, 0, 0, 0.55);
    }

    .comments-section h3 {
      margin: 0 0 10px;
      font-size: 14px;
    }

    .comment-list {
      list-style: none;
      padding: 0;
      margin: 0 0 10px;
      max-height: 240px;
      overflow-y: auto;
      scrollbar-width: thin;
    }

    .comment-item {
      padding: 6px 0;
      border-bottom: 1px solid rgba(31, 41, 55, 0.9);
    }

    .comment-item:last-child {
      border-bottom: none;
    }

    .comment-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      font-size: 12px;
      margin-bottom: 2px;
    }

    .comment-header .nickname {
      font-weight: 500;
    }

    .comment-header .date {
      color: var(--text-sub);
      font-size: 11px;
    }

    .comment-body {
      margin: 0;
      font-size: 13px;
      color: var(--text-main);
    }

    .comment-empty {
      font-size: 12px;
      color: var(--text-sub);
      padding: 4px 0;
    }

    .comment-form textarea {
      resize: vertical;
      min-height: 54px;
      margin-bottom: 6px;
      width: 100%;
    }

    .comment-form .primary-btn {
      width: auto;
      padding-inline: 14px;
      font-size: 13px;
    }

    /* í¼ ì¹´ë“œ */

    .form-card {
      background: radial-gradient(circle at top left, #020617, #020308 70%);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(31, 41, 55, 0.9);
      padding: 14px 14px 16px;
      box-shadow: var(--shadow-soft);
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-width: 620px;
    }

    .form-card label {
      margin-bottom: 4px;
    }

    .form-card textarea {
      min-height: 90px;
      resize: vertical;
    }

    .form-card .primary-btn {
      align-self: flex-end;
      margin-top: 4px;
    }

    .tab-row {
      display: flex;
      gap: 8px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }

    .empty-text {
      font-size: 13px;
      color: var(--text-sub);
      padding: 12px 8px;
      border-radius: var(--radius-lg);
      background: rgba(15, 23, 42, 0.9);
      border: 1px dashed rgba(55, 65, 81, 0.9);
    }

    #my-posts,
    #liked-posts {
      margin-top: 8px;
    }

    .id-search-row {
      margin-top: 10px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }

    .id-search-row select,
    .id-search-row input {
      max-width: 200px;
      flex: 1 1 140px;
    }

    .id-search-row button {
      flex-shrink: 0;
    }

    /* í”¼ë“œ: ì •ë ¬ & ê³ ì • ê³µì§€ */

    .feed-controls-row {
      margin-top: 10px;
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }

    .feed-sort-row {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
    }

    .feed-sort-row label {
      margin: 0;
      font-size: 12px;
      color: var(--text-sub);
    }

    .feed-sort-row select {
      min-width: 140px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-main);
      font-size: 12px;
    }

    .feed-sort-row select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(255, 59, 105, 0.4);
    }

    .feed-pinned-notice {
      margin-bottom: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(191, 219, 254, 0.4);
      background: linear-gradient(135deg, rgba(30, 64, 175, 0.55), rgba(15, 23, 42, 0.98));
      box-shadow: 0 16px 32px rgba(15, 23, 42, 0.7);
      position: sticky;
      top: 60px;
      z-index: 5;
    }

    .feed-pinned-label {
      font-size: 11px;
      color: rgba(219, 234, 254, 0.9);
      margin-bottom: 4px;
    }

    .feed-pinned-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .feed-pinned-body {
      font-size: 12px;
      color: rgba(226, 232, 240, 0.9);
      margin: 0 0 6px;
    }

    /* í™ˆ: TOP ìë‘ & ê°œì¸í™” ì¶”ì²œ */

    .home-top-brag-section,
    .home-reco-section {
      margin-top: 18px;
    }

    .top-brag-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 12px;
    }

    .top-brag-card {
      border-radius: 14px;
      border: 1px solid rgba(31, 41, 55, 0.9);
      background: radial-gradient(circle at top left, #020617, #020308 80%);
      padding: 8px 9px 10px;
      display: flex;
      gap: 8px;
      cursor: pointer;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.6);
    }

    .top-brag-card:hover {
      border-color: rgba(96, 165, 250, 0.9);
      transform: translateY(-1px);
      transition: transform 0.15s ease, border-color 0.15s ease;
    }

    .top-brag-thumb {
      width: 72px;
      height: 72px;
      border-radius: 12px;
      background-size: cover;
      background-position: center;
      background-color: #020617;
      flex-shrink: 0;
    }

    .top-brag-body {
      display: flex;
      flex-direction: column;
      gap: 3px;
      min-width: 0;
    }

    .top-brag-meta {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      font-size: 11px;
      color: var(--text-sub);
    }

    .top-brag-category {
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.9);
      font-size: 10px;
      white-space: nowrap;
    }

    .rank-badge {
      position: absolute;
      top: -6px;
      left: -6px;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
      color: #fff;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
      z-index: 2;
      border: 2px solid rgba(15, 23, 42, 0.9);
    }

    .rank-1 {
      background: linear-gradient(135deg, #ffd700, #b8860b);
    }

    .rank-2 {
      background: linear-gradient(135deg, #c0c0c0, #7f8c8d);
    }

    .rank-3 {
      background: linear-gradient(135deg, #cd7f32, #a0522d);
    }

    .top-brag-likes {
      font-size: 11px;
    }

    .top-brag-title {
      font-size: 13px;
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .top-brag-author {
      font-size: 11px;
      color: var(--text-sub);
    }

    /* í”„ë¡œí•„ í˜ì´ì§€ */

    .profile-layout {
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(0, 2.2fr);
      gap: 18px;
      align-items: flex-start;
    }

    .profile-card {
      background: radial-gradient(circle at top left, #111827, #020308 70%);
      border-radius: 20px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      padding: 14px 16px 14px;
      box-shadow: var(--shadow-soft);
      margin-bottom: 14px;
    }

    .profile-header-row {
      display: flex;
      gap: 12px;
      align-items: center;
      margin-bottom: 10px;
    }

    .profile-avatar {
      width: 44px;
      height: 44px;
      font-size: 16px;
    }

    .profile-nickname-row {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .profile-nickname-row h3 {
      margin: 0;
      font-size: 18px;
    }

    .profile-role-pill {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-sub);
    }

    .profile-operator-badge {
      font-size: 10px;
      padding: 3px 7px;
      border-radius: 999px;
      background: rgba(251, 191, 36, 0.15);
      border: 1px solid rgba(251, 191, 36, 0.8);
      color: #facc15;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .profile-bio {
      margin: 4px 0 0;
      font-size: 13px;
      color: var(--text-sub);
    }

    .profile-meta-row {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      align-items: flex-end;
      margin-top: 10px;
      flex-wrap: wrap;
    }

    .profile-meta-label {
      font-size: 11px;
      color: var(--text-sub);
      margin-bottom: 4px;
    }

    .profile-category-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .profile-category-chips .chip {
      font-size: 11px;
      padding: 4px 9px;
    }

    .profile-actions {
      display: flex;
      gap: 6px;
      flex-shrink: 0;
    }

    .profile-actions .secondary-btn {
      font-size: 12px;
      padding-inline: 12px;
    }

    .profile-side {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .profile-dealer-body {
      font-size: 13px;
      color: var(--text-sub);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .profile-dealer-rating {
      font-size: 14px;
      font-weight: 500;
      color: #fde68a;
    }

    .profile-dealer-meta {
      font-size: 12px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .profile-dealer-card .home-pill-link {
      margin-top: 4px;
      align-self: flex-start;
    }

    .profile-link {
      cursor: pointer;
    }

    /* NEW: Enhanced Profile Styles */
    .profile-cover {
      height: 180px;
      width: 100%;
      background-size: cover;
      background-position: center;
      border-radius: 20px 20px 0 0;
      position: relative;
      margin-bottom: -40px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .profile-cover::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, transparent, rgba(2, 6, 23, 0.9));
    }

    .profile-card.enhanced {
      padding: 0;
      overflow: hidden;
      background: #020617;
      border: 1px solid var(--glass-border);
      animation: scaleIn 0.5s ease-out;
    }

    .profile-content-wrapper {
      padding: 0 24px 24px;
      position: relative;
      z-index: 2;
    }

    .profile-avatar-large {
      width: 80px;
      height: 80px;
      font-size: 28px;
      border: 4px solid #020617;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
      background: radial-gradient(circle at top left, #374151, #111827);
    }

    .profile-header-enhanced {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      margin-bottom: 16px;
    }

    .profile-names {
      margin-top: 12px;
    }

    .profile-names h3 {
      font-size: 24px;
      font-weight: 700;
      margin: 0 0 4px;
      background: linear-gradient(to right, #fff, #94a3b8);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .profile-stats-row {
      display: flex;
      gap: 24px;
      margin: 16px 0;
      padding: 16px 0;
      border-top: 1px solid rgba(255, 255, 255, 0.08);
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    }

    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
    }

    .stat-value {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-main);
    }

    .stat-label {
      font-size: 12px;
      color: var(--text-sub);
    }

    .profile-badges {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .profile-badge {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 6px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: #cbd5e1;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    /* ì‹ ê³  ëª¨ë‹¬ */

    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.85);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 40;
    }

    .modal {
      width: 100%;
      max-width: 360px;
      background: radial-gradient(circle at top left, #111827, #020308 70%);
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      padding: 16px 16px 14px;
      box-shadow: var(--shadow-soft);
    }

    .modal h3 {
      margin: 0 0 6px;
      font-size: 16px;
    }

    .modal p {
      margin: 0 0 10px;
      font-size: 13px;
      color: var(--text-sub);
    }

    .modal-options {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 10px;
      font-size: 13px;
    }

    .modal-options label {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      color: var(--text-main);
      margin: 0;
    }

    .modal-options input[type="radio"] {
      accent-color: var(--accent);
    }

    .modal-actions {
      display: flex;
      justify-content: flex-end;
      gap: 6px;
    }

    .modal-target {
      font-size: 12px;
      color: var(--text-sub);
      margin-bottom: 8px;
    }

    /* ë°˜ì‘í˜• */

    @media (max-width: 900px) {
      #detail-section .detail-wrapper {
        grid-template-columns: minmax(0, 1fr);
      }

      .home-hero {
        grid-template-columns: minmax(0, 1fr);
      }

      .home-grid {
        grid-template-columns: minmax(0, 1fr);
      }

      .profile-layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 720px) {
      .top-bar {
        flex-direction: column;
        align-items: stretch;
      }

      .logo-and-nav {
        justify-content: space-between;
      }

      .search-bar {
        max-width: none;
      }

      main {
        padding-inline: 10px;
      }

      .auth-card {
        padding: 24px 18px 20px;
      }
    }

    @media (max-width: 480px) {
      .card-grid {
        grid-template-columns: minmax(0, 1fr);
      }

      .user-area {
        justify-content: space-between;
      }

      .feed-controls-row {
        flex-direction: column;
        align-items: flex-start;
      }
    }
  </style>
</head>

<body>

  <!-- ë¡œê·¸ì¸ í˜ì´ì§€ -->
  <section id="login-page" class="page">
    <div class="auth-card">
      <div class="auth-logo">
        <span>BidderLive</span>
        <span style="opacity:.7;">Community</span>
      </div>
      <h1>ë¹„ë”ë¼ì´ë¸Œ ì»¤ë®¤ë‹ˆí‹° ì…ì¥</h1>
      <p class="subtitle">ë¹„ë”ë¼ì´ë¸Œ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ê³  ë‚™ì°°í…œì„ ìë‘í•´ë³´ì„¸ìš”.</p>

      <form id="login-form">
        <label for="login-email">
          <span class="label-text">ì´ë©”ì¼</span>
          <input id="login-email" type="email" placeholder="you@example.com" value="collector@bidderlive.com">
        </label>

        <label for="login-password">
          <span class="label-text">ë¹„ë°€ë²ˆí˜¸</span>
          <input id="login-password" type="password" placeholder="ë¹„ë”ë¼ì´ë¸Œ ë¹„ë°€ë²ˆí˜¸" value="1234">
        </label>

        <fieldset>
          <legend>ì—­í•  ì„ íƒ</legend>
          <div class="role-row">
            <label>
              <input type="radio" name="role" value="buyer" checked>
              <span>êµ¬ë§¤ì(ì»¬ë ‰í„°)</span>
            </label>
            <label>
              <input type="radio" name="role" value="seller">
              <span>íŒë§¤ì(ë”œëŸ¬)</span>
            </label>
          </div>
        </fieldset>

        <label for="login-nickname">
          <span class="label-text">ë¹„ë”ë¼ì´ë¸Œ ë‹‰ë„¤ì„</span>
          <input id="login-nickname" type="text" placeholder="ë¹„ë”ë¼ì´ë¸Œì—ì„œ ì“°ëŠ” ë‹‰ë„¤ì„" value="ìˆ˜ì§‘ê´‘">
        </label>
        <div class="helper-text">
          Â· ì´ ë‹‰ë„¤ì„ì´ ì»¤ë®¤ë‹ˆí‹°ì˜ ê²Œì‹œê¸€/ëŒ“ê¸€ ì‘ì„±ìë¡œ ê·¸ëŒ€ë¡œ í‘œì‹œë©ë‹ˆë‹¤.
        </div>

        <button type="submit" class="primary-btn full-width" id="login-submit-btn">ë¡œê·¸ì¸</button>
      </form>

      <div class="auth-footer">
        <span>ì•„ì§ ê³„ì •ì´ ì—†ë‹¤ë©´ ì•±ì—ì„œ ë¨¼ì € íšŒì›ê°€ì…ì„ ì§„í–‰í•´ì£¼ì„¸ìš”.</span>
        <span>ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</span>
      </div>
    </div>
  </section>

  <!-- ë©”ì¸ ì•± -->
  <div id="app" class="hidden">
    <header class="top-bar">
      <div class="logo-and-nav">
        <div class="logo"><img src="/bidderlive-logo.png" alt="BidderLive ë¡œê³ "></div>
        <nav class="main-nav">
          <button class="nav-link active" data-target="home-section">ë©”ì¸</button>
          <button class="nav-link" data-target="feed-section">í”¼ë“œ</button>
          <button class="nav-link" data-target="new-post-section">ìë‘ ì˜¬ë¦¬ê¸°</button>
          <button class="nav-link" data-target="my-collection-section">ë§ˆì´ì»¬ë ‰ì…˜</button>
          <button class="nav-link" data-target="profile-section">í”„ë¡œí•„</button>
        </nav>
      </div>
      <div class="search-bar">
        <input id="global-search-input" type="text" autocomplete="off" placeholder="ì œëª©, ë‹‰ë„¤ì„, ì¹´í…Œê³ ë¦¬ë¡œ ê²€ìƒ‰" />
      </div>
      <div class="user-area">
        <div class="user-meta">
          <span class="nickname-label current-nickname">ë‹‰ë„¤ì„</span>
          <span class="role-label" id="current-role-label">ì—­í• </span>
        </div>
        <button id="hit-share-btn" class="secondary-btn hidden">HIT ê³µìœ </button>
      </div>
    </header>

    <main>
      <!-- HOME / ë©”ì¸ -->
      <section id="home-section" class="page-section">
        <div class="section-header">
          <h2>ë¹„ë”ë¼ì´ë¸Œ ì»¤ë®¤ë‹ˆí‹° ë©”ì¸</h2>
          <p class="section-subtitle">
            ê³µì§€ì‚¬í•­, ì»¤ë®¤ë‹ˆí‹° ì´ìš© ê·œì¹™, ì´ë²¤íŠ¸ì™€ ê´‘ê³ ë¥¼ í•œ ë²ˆì— í™•ì¸í•  ìˆ˜ ìˆëŠ” ë©”ì¸ í—ˆë¸Œì…ë‹ˆë‹¤.
          </p>
        </div>

        <div class="home-hero">
          <div class="home-hero-card">
            <h3 class="home-hero-title">ì˜¤ëŠ˜ì˜ ì»¤ë®¤ë‹ˆí‹° ì†Œì‹</h3>
            <p class="home-hero-sub">
              ë¼ì´ë¸Œ, 48ì‹œê°„ ê²½ë§¤, ê³µë™êµ¬ë§¤ ì†Œì‹ê³¼ ìš´ì˜ ê³µì§€ë“¤ì„ ëª¨ì•„ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤.
            </p>
            <div class="home-badges">
              <span class="home-badge">ğŸš¨ ì ê²€ ê³µì§€ ì£¼ 1íšŒ ê²Œì‹œ</span>
              <span class="home-badge">ğŸ›¡ ì•ˆì „í•œ ê±°ë˜ ë³´í˜¸</span>
              <span class="home-badge">ğŸ’¬ ì‹¤ì‹œê°„ ì»¤ë®¤ë‹ˆí‹° ìš´ì˜</span>
            </div>
            <div>
              <button type="button" class="home-pill-link" data-jump="feed-section">
                <span class="icon">ğŸ“¸</span>
                <span>ì˜¤ëŠ˜ ì˜¬ë¼ì˜¨ ìë‘ ë³´ëŸ¬ê°€ê¸°</span>
              </button>
              <button type="button" class="home-pill-link" data-jump="new-post-section">
                <span class="icon">âœ¨</span>
                <span>ë‚´ ë‚™ì°°í…œ ìë‘ ì˜¬ë¦¬ê¸°</span>
              </button>
            </div>
            <div class="home-hero-highlight">
              <div class="home-hero-mini-title">ìš´ì˜íŒ€ í•œë§ˆë””</div>
              <div class="home-hero-item">
                <span class="label">Â· ìŠ¤í¬Â·ë¤í•‘Â·ì‚¬ê¸° í–‰ìœ„</span>
                <span class="value">ë¬´ê´€ìš© ì •ì±… ì ìš©</span>
              </div>
              <div class="home-hero-item">
                <span class="label">Â· ê±°ë˜ ê´€ë ¨ ë¶„ìŸ</span>
                <span class="value">ê³ ê°ì„¼í„° / ë¬¸ì˜í•˜ê¸°ë¡œ ì ‘ìˆ˜</span>
              </div>
            </div>
          </div>

          <div class="home-hero-card">
            <h3 class="home-hero-title">ì„œë¹„ìŠ¤ ê³µì§€</h3>
            <p class="home-hero-sub">ë¹„ë”ë¼ì´ë¸Œ ì•± / ì»¤ë®¤ë‹ˆí‹° ê³µì§€ì˜ ìš”ì•½ì…ë‹ˆë‹¤.</p>
            <ul class="notice-list">
              <li class="notice-item">
                <div class="notice-title">[ì•ˆë‚´] ë¹„ë”ë¼ì´ë¸Œ ì»¤ë®¤ë‹ˆí‹° ë² íƒ€ ì˜¤í”ˆ</div>
                <div class="notice-meta">2025-03-01 Â· ìš´ì˜ì</div>
              </li>
              <li class="notice-item">
                <div class="notice-title">[ì ê²€] ë§¤ì£¼ ì›”ìš”ì¼ ìƒˆë²½ 4~5ì‹œ ì •ê¸° ì ê²€</div>
                <div class="notice-meta">2025-02-18 Â· ì‹œìŠ¤í…œ ê³µì§€</div>
              </li>
              <li class="notice-item">
                <div class="notice-title">[ì¤‘ìš”] ì‚¬ê¸° / í˜„ê¸ˆ ê±°ë˜ ìœ ë„ ê³„ì • ì œì¬ ì•ˆë‚´</div>
                <div class="notice-meta">2025-02-10 Â· ì•ˆì „ê±°ë˜íŒ€</div>
              </li>
            </ul>
          </div>
        </div>

        <div class="home-grid">
          <div class="tile">
            <div class="tile-header">
              <div>
                <h4 class="tile-title">ì»¤ë®¤ë‹ˆí‹° ì´ìš© ê·œì¹™</h4>
                <p class="tile-sub">ëª¨ë“  ì´ìš©ìëŠ” ì•„ë˜ ê·œì¹™ì— ë™ì˜í•˜ëŠ” ê²ƒìœ¼ë¡œ ê°„ì£¼ë˜ë©°, ìœ„ë°˜ ì‹œ ì œì¬ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
              </div>
            </div>
            <ul class="rule-list">
              <li class="rule-item">
                <span class="rule-index">01</span>
                <div class="rule-text">ë¹„ë”ë¼ì´ë¸Œì—ì„œ ì‹¤ì œ ë‚™ì°°/êµ¬ë§¤í•œ ë¬¼ê±´ ì¤‘ì‹¬ìœ¼ë¡œ ê²Œì‹œê¸€ì„ ì‘ì„±í•´ ì£¼ì„¸ìš”. (íƒ€ í”Œë«í¼ í™ë³´ì„± ê¸€, í—ˆìœ„ ì‚¬ì§„ ì—…ë¡œë“œ ê¸ˆì§€)</div>
              </li>
              <li class="rule-item">
                <span class="rule-index">02</span>
                <div class="rule-text">ìš•ì„¤, ë¹„ë°©, í˜ì˜¤ í‘œí˜„, íŠ¹ì •ì¸/ë”œëŸ¬ì— ëŒ€í•œ ê·¼ê±° ì—†ëŠ” ê³µê²© ê¸€ì€ ì‚¬ì „ ê²½ê³  ì—†ì´ ìˆ¨ê¹€/ì‚­ì œ ë° ê³„ì • ì œì¬ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
              </li>
              <li class="rule-item">
                <span class="rule-index">03</span>
                <div class="rule-text">ì§ê±°ë˜, í˜„ê¸ˆ ì†¡ê¸ˆ, í”Œë«í¼ ì™¸ ê²°ì œë¥¼ ìœ ë„í•˜ëŠ” í–‰ìœ„ëŠ” ì—„ê²©íˆ ê¸ˆì§€ë˜ë©°, ë¶„ìŸ ë°œìƒ ì‹œ ë³´ìƒì´ ë¶ˆê°€í•©ë‹ˆë‹¤.</div>
              </li>
              <li class="rule-item">
                <span class="rule-index">04</span>
                <div class="rule-text">ì €ì‘ê¶Œì´ ìˆëŠ” ì´ë¯¸ì§€/ìŒì›/ì½˜í…ì¸ ë¥¼ ë¬´ë‹¨ ì‚¬ìš©í•˜ì§€ ë§ì•„ ì£¼ì„¸ìš”. (íŠ¹íˆ ì•¨ë²”, ì•„íŠ¸ì›Œí¬ ìŠ¤ìº”ë³¸ ë“±)</div>
              </li>
              <li class="rule-item">
                <span class="rule-index">05</span>
                <div class="rule-text">ì»¤ë®¤ë‹ˆí‹° ë‚´ ì´ë²¤íŠ¸, ê³µë™êµ¬ë§¤, ê²½í’ˆ í™œë™ ì§„í–‰ ì‹œ ë°˜ë“œì‹œ ìš´ì˜ì •ì±…ê³¼ ë²•ë ¹ì„ ì¤€ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤.</div>
              </li>
            </ul>
          </div>

          <div class="tile">
            <div class="tile-header">
              <div>
                <h4 class="tile-title">ì´ë²¤íŠ¸ & ê´‘ê³ </h4>
                <p class="tile-sub">ë¹„ë”ë¼ì´ë¸Œ íŒŒíŠ¸ë„ˆ ë° ê³µì‹ ìº í˜ì¸ ì˜ì—­ì…ë‹ˆë‹¤.</p>
              </div>
            </div>
            <div class="ad-grid">
              <div class="ad-card">
                <div class="ad-tag">ê³µì‹ ì´ë²¤íŠ¸</div>
                <div class="ad-title">ì¹œêµ¬ ì´ˆëŒ€í•˜ë©´ ì ë¦½ê¸ˆ ì§€ê¸‰</div>
                <div class="ad-desc">ë‚´ ì½”ë“œë¡œ ê°€ì…í•œ ì¹œêµ¬ê°€ ì²« ë‚™ì°°í•˜ë©´, ë‘˜ ë‹¤ ì ë¦½ê¸ˆì„ ë°›ëŠ” ì´ë²¤íŠ¸!</div>
              </div>
              <div class="ad-card">
                <div class="ad-tag">ë”œëŸ¬ í”„ë¡œëª¨ì…˜</div>
                <div class="ad-title">ì‹ ê·œ ë”œëŸ¬ ìˆ˜ìˆ˜ë£Œ ìš°ëŒ€</div>
                <div class="ad-desc">ì…ì  ì²« ë‹¬, íŠ¹ì • ì¹´í…Œê³ ë¦¬ ìˆ˜ìˆ˜ë£Œë¥¼ í•œì‹œì ìœ¼ë¡œ ì¸í•˜í•©ë‹ˆë‹¤.</div>
              </div>
              <div class="ad-card">
                <div class="ad-tag">ê´‘ê³  ë¬¸ì˜</div>
                <div class="ad-desc">ë¸Œëœë“œ/ë”œëŸ¬ ê´‘ê³  ì§‘í–‰ì„ ì›í•˜ì‹œë©´ ë¹„ë”ë¼ì´ë¸Œ ìš´ì˜íŒ€ì— ë¬¸ì˜í•´ ì£¼ì„¸ìš”.</div>
              </div>
            </div>
          </div>
        </div>

        <!-- ë©”ì¸ ì¸ë„¤ì¼ ê´‘ê³  ì˜ì—­ -->
        <section class="home-thumb-ads">
          <div class="tile">
            <div class="tile-header">
              <div>
                <h4 class="tile-title">ë©”ì¸ ì¸ë„¤ì¼ ê´‘ê³ </h4>
                <p class="tile-sub">ë¸Œëœë“œÂ·ë”œëŸ¬ê°€ ë“±ë¡í•˜ëŠ” ì¸ë„¤ì¼í˜• ë°°ë„ˆ ê´‘ê³  ì˜ì—­ì…ë‹ˆë‹¤.</p>
              </div>
            </div>
            <div class="thumb-ad-strip">
              <a class="thumb-ad-card" href="#">
                <div class="thumb-ad-thumb"
                  style="background-image:url('https://via.placeholder.com/400x250?text=AD+1');"></div>
                <div class="thumb-ad-meta">
                  <div class="thumb-ad-label">AD Â· ê³µì‹ íŒŒíŠ¸ë„ˆ</div>
                  <div class="thumb-ad-title">ì£¼ë§ í•œì • ë¼ì´ë¸Œ íŠ¹ê°€ì „</div>
                </div>
              </a>
              <a class="thumb-ad-card" href="#">
                <div class="thumb-ad-thumb"
                  style="background-image:url('https://via.placeholder.com/400x250?text=AD+2');"></div>
                <div class="thumb-ad-meta">
                  <div class="thumb-ad-label">AD Â· ê³µë™êµ¬ë§¤</div>
                  <div class="thumb-ad-title">ìŠ¤í¬ì¸ ì¹´ë“œ ëœë¤ë°•ìŠ¤ ê³µë™êµ¬ë§¤</div>
                </div>
              </a>
              <a class="thumb-ad-card" href="#">
                <div class="thumb-ad-thumb"
                  style="background-image:url('https://via.placeholder.com/400x250?text=AD+3');"></div>
                <div class="thumb-ad-meta">
                  <div class="thumb-ad-label">AD Â· ì‹ ê·œ ë”œëŸ¬</div>
                  <div class="thumb-ad-title">í”„ë¦¬ë¯¸ì—„ í”¼ê·œì–´ ë”œëŸ¬ ì…ì </div>
                </div>
              </a>
              <a class="thumb-ad-card" href="#">
                <div class="thumb-ad-thumb"
                  style="background-image:url('https://via.placeholder.com/400x250?text=AD+4');"></div>
                <div class="thumb-ad-meta">
                  <div class="thumb-ad-label">AD Â· ë¸Œëœë“œ ìŠ¤í°ì„œ</div>
                  <div class="thumb-ad-title">í•œì •íŒ ìŠ¤ë‹ˆì»¤ì¦ˆ ë“œë¡œìš° ì†Œì‹</div>
                </div>
              </a>
            </div>
          </div>
        </section>

        <!-- ì˜¤ëŠ˜ì˜ TOP ìë‘ê¸€ -->
        <section class="home-top-brag-section">
          <div class="tile">
            <div class="tile-header">
              <div>
                <h4 class="tile-title">ì˜¤ëŠ˜ì˜ TOP ìë‘ê¸€</h4>
                <p class="tile-sub">ì»¤ë®¤ë‹ˆí‹°ì—ì„œ íŠ¹íˆ ë°˜ì‘ì´ ì¢‹ì•˜ë˜ ìë‘ê¸€ì´ì—ìš”.</p>
              </div>
            </div>
            <div id="home-top-brag-list" class="top-brag-list">
              <p class="empty-text">ì¸ê¸° ìë‘ê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤.</p>
            </div>
          </div>
        </section>

        <!-- ê°œì¸í™” ì¶”ì²œ ìë‘ê¸€ -->
        <section class="home-reco-section">
          <div class="tile">
            <div class="tile-header">
              <div>
                <h4 class="tile-title"><span id="reco-username">OO</span>ë‹˜ì„ ìœ„í•œ ì¶”ì²œ ìë‘</h4>
                <p class="tile-sub">ìµœê·¼ ê´€ì‹¬ ì¹´í…Œê³ ë¦¬ì™€ ë”œëŸ¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê³¨ë¼ë´¤ì–´ìš”.</p>
              </div>
            </div>
            <div id="home-reco-list" class="top-brag-list">
              <p class="empty-text">ë¡œê·¸ì¸í•˜ë©´ ë§ì¶¤ ì¶”ì²œ ìë‘ê¸€ì„ ë³¼ ìˆ˜ ìˆì–´ìš”.</p>
            </div>
          </div>
        </section>
      </section>

      <!-- í”¼ë“œ -->
      <section id="feed-section" class="page-section hidden">
        <div class="section-header">
          <h2>ì»¤ë®¤ë‹ˆí‹° í”¼ë“œ</h2>
          <p class="section-subtitle">
            ì¹´í…Œê³ ë¦¬ë³„ë¡œ ì•„íŠ¸í† ì´ë¶€í„° CD/LPê¹Œì§€, ë¹„ë”ë¼ì´ë¸Œì—ì„œ ì˜¨ ë‚™ì°°í…œì„ ìë‘í•˜ëŠ” ê³µê°„ì…ë‹ˆë‹¤.
          </p>
          <div class="category-filter">
            <button class="chip active" data-category="all">ì „ì²´</button>
            <button class="chip" data-category="arttoy">ì•„íŠ¸í† ì´</button>
            <button class="chip" data-category="figure">í”¼ê·œì–´</button>
            <button class="chip" data-category="lego">ë ˆê³ </button>
            <button class="chip" data-category="sportscard">ìŠ¤í¬ì¸ ì¹´ë“œ</button>
            <button class="chip" data-category="fashion">íŒ¨ì…˜</button>
            <button class="chip" data-category="gundam">ê±´ë‹´</button>
            <button class="chip" data-category="tradingcard">íŠ¸ë ˆì´ë”©ì¹´ë“œ</button>
            <button class="chip" data-category="luxury">ëª…í’ˆ</button>
            <button class="chip" data-category="stamp">ìš°í‘œ</button>
            <button class="chip" data-category="cdlp">CD / LP</button>
          </div>
        </div>

        <!-- ê³ ì • ê³µì§€ -->
        <div class="feed-pinned-notice">
          <div class="feed-pinned-label">ğŸ“Œ ê³ ì • ê³µì§€ Â· ìš´ì˜ì</div>
          <div class="feed-pinned-title">[í•„ë…] ë¹„ë”ë¼ì´ë¸Œ ì»¤ë®¤ë‹ˆí‹° ì´ìš© ê°€ì´ë“œ</div>
          <p class="feed-pinned-body">
            ì•ˆì „í•œ ê±°ë˜ì™€ ê±´ê°•í•œ ì†Œí†µì„ ìœ„í•´ ë°˜ë“œì‹œ ì»¤ë®¤ë‹ˆí‹° ì´ìš© ê·œì¹™ì„ í™•ì¸í•´ ì£¼ì„¸ìš”.
            ìœ„ë°˜ ì‹œ ì‚¬ì „ ê²½ê³  ì—†ì´ ê²Œì‹œê¸€ ìˆ¨ê¹€/ì‚­ì œ ë° ê³„ì • ì œì¬ê°€ ì´ë£¨ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
          </p>
          <button type="button" class="text-btn" id="open-pinned-detail">ì»¤ë®¤ë‹ˆí‹° ì´ìš© ê·œì¹™ ë³´ëŸ¬ê°€ê¸°</button>
        </div>

        <!-- ì¹´í…Œê³ ë¦¬ + ì•„ì´ë”” ê²€ìƒ‰ -->
        <div class="id-search-row">
          <select id="category-id-select">
            <option value="">ì¹´í…Œê³ ë¦¬ ì„ íƒ</option>
            <option value="arttoy">ì•„íŠ¸í† ì´</option>
            <option value="figure">í”¼ê·œì–´</option>
            <option value="lego">ë ˆê³ </option>
            <option value="sportscard">ìŠ¤í¬ì¸ ì¹´ë“œ</option>
            <option value="fashion">íŒ¨ì…˜</option>
            <option value="gundam">ê±´ë‹´</option>
            <option value="tradingcard">íŠ¸ë ˆì´ë”©ì¹´ë“œ</option>
            <option value="luxury">ëª…í’ˆ</option>
            <option value="stamp">ìš°í‘œ</option>
            <option value="cdlp">CD / LP</option>
          </select>
          <input id="category-id-input" type="text" placeholder="ì•„ì´ë”” (ì˜ˆ: 1 ë˜ëŠ” arttoy-1)" />
          <button id="category-id-search-btn" class="secondary-btn">ì•„ì´ë”” ê²€ìƒ‰</button>
        </div>
        <p class="small-helper">
          ì¹´í…Œê³ ë¦¬ì™€ ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ë©´ í•´ë‹¹ ìë‘ê¸€ ìƒì„¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
        </p>

        <!-- íƒ­ + ì •ë ¬ -->
        <div class="feed-controls-row">
          <div class="tab-row feed-tab-row">
            <button class="chip active" data-feed-tab="all">ì „ì²´ ë³´ê¸°</button>
            <button class="chip" data-feed-tab="brag">ìë‘ í”¼ë“œ</button>
            <button class="chip" data-feed-tab="hit">HIT ê³µìœ  í”¼ë“œ</button>
            <button class="chip" data-feed-tab="followed">íŒ”ë¡œìš°í•œ ë”œëŸ¬ ê¸€ë§Œ</button>
          </div>

          <div class="feed-sort-row">
            <label for="feed-sort-select">ì •ë ¬</label>
            <select id="feed-sort-select">
              <option value="latest">ìµœì‹ ìˆœ</option>
              <option value="likes">ì¸ê¸°ìˆœ(ì¢‹ì•„ìš”)</option>
              <option value="comments">ëŒ“ê¸€ë§ì€ìˆœ</option>
              <option value="hitOnly">HITë§Œ</option>
            </select>
          </div>
        </div>

        <div id="feed-list" class="card-grid">
          <!-- JSë¡œ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± -->
        </div>
      </section>

      <!-- ìƒì„¸ í™”ë©´ -->
      <section id="detail-section" class="page-section hidden">
        <button id="back-to-feed" class="text-btn">â† í”¼ë“œë¡œ ëŒì•„ê°€ê¸°</button>
        <div class="section-header" style="margin-top:6px;">
          <h2>ìë‘ê¸€ ìƒì„¸</h2>
          <p class="section-subtitle">ë‚™ì°° ìˆœê°„ì˜ ì´ì•¼ê¸°ë¥¼ ìì„¸íˆ ë³¼ ìˆ˜ ìˆì–´ìš”.</p>
        </div>

        <div class="detail-wrapper">
          <article class="detail-card" id="detail-article">
            <div class="detail-image" id="detail-image"></div>
            <div class="detail-content">
              <div class="post-meta">
                <span class="category-pill" id="detail-category">ì¹´í…Œê³ ë¦¬</span>
                <span class="badge badge-hit hidden" id="detail-hit-badge">HIT</span>
              </div>
              <h2 class="detail-title" id="detail-title">ì œëª©</h2>
              <p class="detail-desc" id="detail-desc">í•œ ì¤„ ìë‘</p>
              <p class="detail-body" id="detail-body"></p>

              <div class="user-inline profile-link" id="detail-user-inline" data-nickname="" style="margin-top:6px;">
                <div class="avatar-circle" id="detail-avatar">AA</div>
                <div>
                  <div class="nickname" id="detail-nickname">ë‹‰ë„¤ì„</div>
                  <div class="sub" id="detail-subtext"></div>
                </div>
              </div>

              <div class="detail-actions">
                <button class="icon-btn like-btn" id="detail-like-btn" data-liked="false">
                  <span class="like-icon">â™¡</span>
                  <span class="like-count">0</span>
                </button>
                <button class="icon-btn" id="share-btn">ê³µìœ </button>
                <button class="icon-btn report-post-btn">ì‹ ê³ </button>
                <button class="icon-btn edit-post-btn hidden" id="detail-edit-btn">ìˆ˜ì •</button>
                <button class="icon-btn delete-post-btn hidden" id="detail-delete-btn">ì‚­ì œ</button>
              </div>
            </div>
          </article>

          <section class="comments-section">
            <h3>ëŒ“ê¸€</h3>
            <ul id="comment-list" class="comment-list"></ul>

            <form id="comment-form" class="comment-form">
              <textarea id="comment-input" placeholder="ë¹„ë”ë¼ì´ë¸Œ ë‹‰ë„¤ì„ìœ¼ë¡œ ëŒ“ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”."></textarea>
              <button type="submit" class="primary-btn">ëŒ“ê¸€ ë“±ë¡</button>
            </form>
          </section>
        </div>
      </section>

      <!-- ìë‘ ì˜¬ë¦¬ê¸° -->
      <section id="new-post-section" class="page-section hidden">
        <div class="section-header">
          <h2>ë‚™ì°°í…œ ìë‘í•˜ê¸°</h2>
          <p class="section-subtitle">
            ë¹„ë”ë¼ì´ë¸Œì—ì„œ ë‚™ì°° ë°›ì€ ë¬¼ê±´ì„ ì‚¬ì§„ê³¼ í•¨ê»˜ ì»¤ë®¤ë‹ˆí‹°ì— ê³µìœ í•´ë³´ì„¸ìš”.
          </p>
        </div>

        <form id="new-post-form" class="form-card">
          <label for="new-image">
            <span class="label-text">ì¸ë„¤ì¼ ì´ë¯¸ì§€ (ì¹´ë©”ë¼ / ì‚¬ì§„ ì˜¬ë¦¬ê¸°)</span>
            <input id="new-image" type="file" accept="image/*" capture="environment">
            <div class="small-helper">
              Â· ëª¨ë°”ì¼ì—ì„œëŠ” ì¹´ë©”ë¼ê°€ ì—´ë¦¬ê³ , PCì—ì„œëŠ” íŒŒì¼ ì„ íƒ ì°½ì´ ì—´ë¦½ë‹ˆë‹¤.<br>
              Â· ì´ë¯¸ ì˜¬ë¦° ê¸€ì„ ìˆ˜ì •í•  ë•Œ ì´ë¯¸ì§€ë¥¼ ë‹¤ì‹œ ì„ íƒí•˜ì§€ ì•Šìœ¼ë©´ ê¸°ì¡´ ì´ë¯¸ì§€ê°€ ìœ ì§€ë©ë‹ˆë‹¤.
            </div>
          </label>

          <!-- NEW: Preview Container -->
          <div id="preview-container" class="hidden" style="margin-bottom: 14px;">
            <span class="label-text" style="display:block; margin-bottom:4px;">ë¯¸ë¦¬ë³´ê¸°</span>
            <img id="image-preview" src="" alt="Preview"
              style="max-width: 100%; border-radius: 10px; max-height: 300px; object-fit: cover; border: 1px solid rgba(55,65,81,0.9);">
          </div>

          <label for="new-category">
            <span class="label-text">ì¹´í…Œê³ ë¦¬</span>
            <select id="new-category">
              <option value="arttoy">ì•„íŠ¸í† ì´</option>
              <option value="figure">í”¼ê·œì–´</option>
              <option value="lego">ë ˆê³ </option>
              <option value="sportscard">ìŠ¤í¬ì¸ ì¹´ë“œ</option>
              <option value="fashion">íŒ¨ì…˜</option>
              <option value="gundam">ê±´ë‹´</option>
              <option value="tradingcard">íŠ¸ë ˆì´ë”©ì¹´ë“œ</option>
              <option value="luxury">ëª…í’ˆ</option>
              <option value="stamp">ìš°í‘œ</option>
              <option value="cdlp">CD / LP</option>
            </select>
          </label>

          <label for="new-title">
            <span class="label-text">ì œëª©</span>
            <input id="new-title" type="text" maxlength="50" required placeholder="ì˜ˆ: ìƒì•  ì²« ì•„íŠ¸í† ì´ ë‚™ì°°í–ˆìŠµë‹ˆë‹¤">
          </label>

          <label for="new-desc">
            <span class="label-text">í•œ ì¤„ ìë‘</span>
            <input id="new-desc" type="text" maxlength="80" required placeholder="ë‚™ì°° ìˆœê°„ ëŠë‚Œ, í•œ ì¤„ ìë‘ì„ ì ì–´ì£¼ì„¸ìš”.">
          </label>

          <label for="new-body">
            <span class="label-text">ìƒì„¸ í›„ê¸° (ì„ íƒ)</span>
            <textarea id="new-body" placeholder="ë°©ì†¡ ë¶„ìœ„ê¸°, ì…€ëŸ¬ í›„ê¸°, í¬ì¥ ìƒíƒœ ë“± ìƒì„¸ í›„ê¸°ë¥¼ ììœ ë¡­ê²Œ ì ì–´ì£¼ì„¸ìš”."></textarea>
          </label>

          <button type="submit" class="primary-btn" id="submit-post-btn">ì»¤ë®¤ë‹ˆí‹°ì— ì˜¬ë¦¬ê¸°</button>
        </form>
      </section>

      <!-- ë§ˆì´ì»¬ë ‰ì…˜ -->
      <section id="my-collection-section" class="page-section hidden">
        <div class="section-header">
          <h2>ë§ˆì´ì»¬ë ‰ì…˜</h2>
          <p class="section-subtitle">
            ë‚´ê°€ ì˜¬ë¦° ìë‘ê¸€ê³¼ ì¢‹ì•„ìš”í•œ ê²Œì‹œê¸€ì„ í•œ ë²ˆì— ëª¨ì•„ë³¼ ìˆ˜ ìˆì–´ìš”. ë‚´ ê¸€ì€ ì—¬ê¸°ì„œë„ ìˆ˜ì •/ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
          </p>
        </div>

        <div class="tab-row">
          <button class="chip active" data-my-tab="mine">ë‚´ê°€ ì˜¬ë¦° ê¸€</button>
          <button class="chip" data-my-tab="liked">ì¢‹ì•„ìš”í•œ ê¸€</button>
        </div>

        <div id="my-posts" class="card-grid">
          <p class="empty-text">ì•„ì§ ì˜¬ë¦° ìë‘ê¸€ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ê¸€ì„ ì˜¬ë ¤ë³´ì„¸ìš”!</p>
        </div>

        <div id="liked-posts" class="card-grid hidden">
          <p class="empty-text">ì¢‹ì•„ìš”í•œ ê¸€ì´ ì—¬ê¸°ì— ëª¨ì…ë‹ˆë‹¤.</p>
        </div>
      </section>

      <!-- í”„ë¡œí•„ -->
      <section id="profile-section" class="page-section hidden">
        <div class="section-header">
          <h2>í”„ë¡œí•„</h2>
          <p class="section-subtitle">
            ì‚¬ìš©ì ì •ë³´, ì„ í˜¸ ì¹´í…Œê³ ë¦¬, ìµœê·¼ ìë‘ê¸€ê³¼ ë”œëŸ¬ ì •ë³´ë¥¼ í•œ ê³³ì—ì„œ ë³¼ ìˆ˜ ìˆì–´ìš”.
          </p>
        </div>

        <div class="profile-layout">
          <div class="profile-main">
            <div class="profile-card enhanced">
              <div class="profile-cover" id="profile-cover"
                style="background-image: url('https://via.placeholder.com/800x200?text=Cover+Image');"></div>

              <div class="profile-content-wrapper">
                <div class="profile-header-enhanced">
                  <div class="profile-names">
                    <div class="avatar-circle profile-avatar-large" id="profile-avatar">NN</div>
                    <div style="margin-top: 12px;">
                      <h3 id="profile-nickname">ë‹‰ë„¤ì„</h3>
                      <div style="display:flex; align-items:center; gap:6px;">
                        <span class="profile-role-pill" id="profile-role-pill">ì»¬ë ‰í„°</span>
                        <span class="profile-operator-badge hidden" id="profile-operator-badge">ìš´ì˜ì</span>
                      </div>
                    </div>
                  </div>
                  <div class="profile-actions">
                    <button type="button" class="secondary-btn hidden" id="profile-follow-btn">íŒ”ë¡œìš°</button>
                    <button type="button" class="secondary-btn hidden" id="profile-block-btn">ì°¨ë‹¨í•˜ê¸°</button>
                  </div>
                </div>

                <p class="profile-bio" id="profile-bio">í”„ë¡œí•„ ì†Œê°œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>

                <div class="profile-stats-row">
                  <div class="stat-item">
                    <span class="stat-value" id="profile-stat-followers">0</span>
                    <span class="stat-label">íŒ”ë¡œì›Œ</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-value" id="profile-stat-following">0</span>
                    <span class="stat-label">íŒ”ë¡œì‰</span>
                  </div>
                  <div class="stat-item">
                    <span class="stat-value" id="profile-stat-likes">0</span>
                    <span class="stat-label">ë°›ì€ ì¢‹ì•„ìš”</span>
                  </div>
                </div>

                <div class="profile-meta-row" style="border-top:none; padding-top:0; margin-top:0;">
                  <div>
                    <div class="profile-meta-label">í™œë™ ë°°ì§€</div>
                    <div class="profile-badges" id="profile-badges">
                      <!-- badges -->
                    </div>
                  </div>
                </div>

                <div class="profile-meta-row">
                  <div>
                    <div class="profile-meta-label">ì„ í˜¸ ì¹´í…Œê³ ë¦¬</div>
                    <div class="profile-category-chips" id="profile-preferred-categories">
                      <!-- chips -->
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="tile">
              <div class="tile-header">
                <div>
                  <h4 class="tile-title">ìµœê·¼ ìë‘ê¸€</h4>
                  <p class="tile-sub" id="profile-recent-sub">ì´ ì‚¬ìš©ìê°€ ì˜¬ë¦° ìµœê·¼ ìë‘ê¸€ì…ë‹ˆë‹¤.</p>
                </div>
              </div>
              <div id="profile-recent-posts" class="card-grid">
                <p class="empty-text">ì‘ì„±í•œ ìë‘ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
              </div>
            </div>
          </div>

          <aside class="profile-side">
            <div class="tile profile-dealer-card hidden" id="profile-dealer-card">
              <div class="tile-header">
                <div>
                  <h4 class="tile-title">ë”œëŸ¬ ì •ë³´</h4>
                  <p class="tile-sub">ë¹„ë”ë¼ì´ë¸Œ ë¼ì´ë¸Œ/ê²½ë§¤ ì§„í–‰ ì •ë³´</p>
                </div>
              </div>
              <div class="profile-dealer-body">
                <div class="profile-dealer-rating">
                  â˜… <span id="profile-dealer-rating">4.8</span> / 5.0
                </div>
                <div class="profile-dealer-meta">
                  <div class="profile-meta-label">ì£¼ìš” ì¹´í…Œê³ ë¦¬</div>
                  <div id="profile-dealer-categories" class="profile-category-chips"></div>
                </div>
                <a id="profile-live-link" href="#" class="home-pill-link" target="_blank" rel="noopener noreferrer">
                  <span class="icon">â–¶</span>
                  <span>ì´ ë”œëŸ¬ì˜ ë¼ì´ë¸Œ ë³´ëŸ¬ê°€ê¸°</span>
                </a>
              </div>
            </div>
          </aside>
        </div>
      </section>
    </main>
  </div>

  <!-- ì‹ ê³  ëª¨ë‹¬ -->
  <div id="report-modal" class="modal-backdrop hidden">
    <div class="modal">
      <h3>ì‹ ê³ í•˜ê¸°</h3>
      <p>ì‹ ê³  ì‚¬ìœ ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”. ìš´ì˜ìê°€ ê²€í†  í›„ ì¡°ì¹˜í•©ë‹ˆë‹¤.</p>
      <p class="modal-target" id="report-target-text"></p>
      <div class="modal-options">
        <label><input type="radio" name="report-reason" value="ìŠ¤íŒ¸/í™ë³´" checked> ìŠ¤íŒ¸ / í™ë³´ì„± ì½˜í…ì¸ </label>
        <label><input type="radio" name="report-reason" value="ìš•ì„¤/ë¹„í•˜"> ìš•ì„¤ / ë¹„í•˜ / í˜ì˜¤ í‘œí˜„</label>
        <label><input type="radio" name="report-reason" value="ì‚¬ê¸°/í˜„ê¸ˆê±°ë˜ ìœ ë„"> ì‚¬ê¸° / í˜„ê¸ˆ ê±°ë˜ ìœ ë„</label>
        <label><input type="radio" name="report-reason" value="ì„ ì •ì /ë¶ˆê±´ì „ ì½˜í…ì¸ "> ì„ ì •ì  / ë¶ˆê±´ì „ ì½˜í…ì¸ </label>
        <label><input type="radio" name="report-reason" value="ê¸°íƒ€"> ê¸°íƒ€</label>
      </div>
      <div class="modal-actions">
        <button type="button" class="secondary-btn" id="report-cancel-btn">ì·¨ì†Œ</button>
        <button type="button" class="primary-btn" id="report-submit-btn">ì‹ ê³  ë³´ë‚´ê¸°</button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const CATEGORY_CONFIG = {
        arttoy: 'ì•„íŠ¸í† ì´',
        figure: 'í”¼ê·œì–´',
        lego: 'ë ˆê³ ',
        sportscard: 'ìŠ¤í¬ì¸ ì¹´ë“œ',
        fashion: 'íŒ¨ì…˜',
        gundam: 'ê±´ë‹´',
        tradingcard: 'íŠ¸ë ˆì´ë”©ì¹´ë“œ',
        luxury: 'ëª…í’ˆ',
        stamp: 'ìš°í‘œ',
        cdlp: 'CD / LP'
      };

      const DEALER_AUTHORS = new Set([
        'statue_lover',
        'sports_card_king',
        'box_breaker',
        'LEGO_city',
        'sneakerhead',
        'vinyl_only',
        'boxsetlover'
      ]);

      // í…ŒìŠ¤íŠ¸ ë°ì´í„° 6ê°œ * 10ì¹´í…Œê³ ë¦¬ (ë™ì¼ + ì¼ë¶€ ë”œëŸ¬ë¡œ ê°€ì •)
      const TEST_POSTS = [
        // ì•„íŠ¸í† ì´
        { id: 'arttoy-1', category: 'arttoy', title: 'í˜ì´í¼ ì•„íŠ¸í† ì´ ì²« ë‚™ì°°', oneLiner: 'ìƒê°ë³´ë‹¤ í¬ê³  ë””í…Œì¼ ì¢‹ì•„ìš”.', body: 'ì»¬ëŸ¬ê°ì´ í™”ë©´ì—ì„œ ë³´ë˜ ê·¸ëŒ€ë¡œë¼ ë§Œì¡±ìŠ¤ëŸ½ìŠµë‹ˆë‹¤.', author: 'arttoy_collector', imageUrl: 'https://images.unsplash.com/photo-1560167016-022b78a0258e?auto=format&fit=crop&w=600&q=80', isHit: true, likeCount: 12, commentCount: 3 },
        { id: 'arttoy-2', category: 'arttoy', title: 'ì»¤ìŠ¤í…€ ë² ì–´ë¸Œë¦­ ìë‘', oneLiner: 'ì»¤ìŠ¤í…€ í˜ì¸íŒ… í€„ë¦¬í‹° ë¯¸ì³¤ìŠµë‹ˆë‹¤.', body: '', author: 'BEARBRICK_LAB', imageUrl: 'https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 8, commentCount: 2 },
        { id: 'arttoy-3', category: 'arttoy', title: 'ê¸€ë¡œìš° ì¸ ë” ë‹¤í¬ ì•„íŠ¸í† ì´', oneLiner: 'ë¶ˆ ë„ë©´ ì•¼ê´‘ì´ ì€ì€í•˜ê²Œ ë‚˜ì™€ìš”.', body: 'ë°¤ì—ë§Œ êº¼ë‚´ ë†“ê³  ê°ìƒ ì¤‘ì…ë‹ˆë‹¤.', author: 'ì•¼ê´‘ì¢‹ì•„', imageUrl: 'https://images.unsplash.com/photo-1535581652167-3d6b98c36cd7?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 5, commentCount: 1 },
        { id: 'arttoy-4', category: 'arttoy', title: 'ì‘ê°€ í•œì •íŒ ì•„íŠ¸í† ì´', oneLiner: 'ë„˜ë²„ë§ê¹Œì§€ ìˆëŠ” ë ˆì–´í…œì…ë‹ˆë‹¤.', body: '', author: 'limited_only', imageUrl: 'https://images.unsplash.com/photo-1515488042361-ee00e0ddd4e4?auto=format&fit=crop&w=600&q=80', isHit: true, likeCount: 20, commentCount: 4 },
        { id: 'arttoy-5', category: 'arttoy', title: 'ì²˜ìŒ ì‚¬ë³¸ ë””ìì´ë„ˆ í† ì´', oneLiner: 'ì…ë¬¸ìš©ìœ¼ë¡œ ë”± ì¢‹ì€ ì‚¬ì´ì¦ˆ.', body: 'í¬ì¥ë„ ì•ˆì „í•˜ê²Œ ì˜ ì™”ì–´ìš”.', author: 'ì…ë¬¸ëŸ¬', imageUrl: 'https://images.unsplash.com/photo-1566576912902-1dcd273d6744?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 4, commentCount: 0 },
        { id: 'arttoy-6', category: 'arttoy', title: 'ë¯¸ê°œë´‰ ìƒíƒœ ìœ ì§€ ì¤‘', oneLiner: 'ì–¸ë°•ì‹±í• ê¹Œ ë§ê¹Œ ê³ ë¯¼ì´ì—ìš”.', body: '', author: 'ì–¸ë°•ì‹±ì°¸ëŠ”ì¤‘', imageUrl: 'https://images.unsplash.com/photo-1581557991964-125469da3b8a?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 9, commentCount: 2 },

        // í”¼ê·œì–´
        { id: 'figure-1', category: 'figure', title: 'ì• ë‹ˆ ìºë¦­í„° 1/6 ìŠ¤ì¼€ì¼ í”¼ê·œì–´', oneLiner: 'ê´€ì ˆ ê°€ë™ë¥  ì¢‹ì•„ì„œ í¬ì§• ë§›ì§‘.', body: 'ì–¼êµ´ ì¡°í˜•ë„ ê¸°ëŒ€ ì´ìƒì…ë‹ˆë‹¤.', author: 'í”¼ë•', imageUrl: 'https://images.unsplash.com/photo-1606663889134-b1dedb5ed8b7?auto=format&fit=crop&w=600&q=80', isHit: true, likeCount: 18, commentCount: 5 },
        { id: 'figure-2', category: 'figure', title: 'í”„ë¦¬ë¯¸ì—„ ìŠ¤íƒœì¸„ í”¼ê·œì–´', oneLiner: 'ë°•ìŠ¤ë¶€í„° í¬ìŠ¤ê°€ ë‹¤ë¦…ë‹ˆë‹¤.', body: '', author: 'statue_lover', imageUrl: 'https://images.unsplash.com/photo-1626240212879-c294107147ce?auto=format&fit=crop&w=600&q=80', isHit: true, likeCount: 25, commentCount: 6 },
        { id: 'figure-3', category: 'figure', title: 'ë¯¸ì†Œë…€ í”¼ê·œì–´ ì»¬ë ‰ì…˜ ì¶”ê°€', oneLiner: 'í”¼ë¶€ í‘œí˜„ì´ ë„ˆë¬´ ìì—°ìŠ¤ëŸ¬ì›Œìš”.', body: '', author: 'moe_moe', imageUrl: 'https://images.unsplash.com/photo-1580894908361-967195033215?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 7, commentCount: 1 },
        { id: 'figure-4', category: 'figure', title: 'ë””ì˜¤ë¼ë§ˆ ì„¸íŠ¸ì™€ í•¨ê»˜ ì˜¨ í”¼ê·œì–´', oneLiner: 'ë°°ê²½ê¹Œì§€ ê°™ì´ ì˜¤ë‹ˆê¹Œ ë¶„ìœ„ê¸°ê°€ ì‚´ì•„ìš”.', body: 'ì„ ë°˜ í•œ ì¹¸ì„ ê·¸ëŒ€ë¡œ ë””ì˜¤ë¼ë§ˆ ì¡´ìœ¼ë¡œ.', author: 'ë””ì˜¤ë¼ë§ˆì¥ì¸', imageUrl: 'https://images.unsplash.com/photo-1593085512500-bfd11932f8a7?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 10, commentCount: 2 },
        { id: 'figure-5', category: 'figure', title: 'ì¤‘ê³ ì§€ë§Œ ìƒíƒœ ì¢‹ì€ í”¼ê·œì–´', oneLiner: 'ë°•ìŠ¤ë§Œ ì‚¬ìš©ê° ìˆê³  ë³¸ì²´ëŠ” ì‹ í’ˆê¸‰.', body: '', author: 'ì„¸ì»¨í•¸ë“œëŸ¬ë²„', imageUrl: 'https://images.unsplash.com/photo-1612036782180-6f0b6cd846fe?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 6, commentCount: 0 },
        { id: 'figure-6', category: 'figure', title: 'ë£¨ì¦ˆ íŒŒì¸ ê¹Œì§€ ì™„ë²½í•œ ì…‹', oneLiner: 'ì† íŒŒì¸ ê°€ ë‹¤ì–‘í•´ì„œ ì¢‹ë„¤ìš”.', body: '', author: 'íŒŒì¸ ìˆ˜ì§‘ê°€', imageUrl: 'https://images.unsplash.com/photo-1560526860-2934e27606e6?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 3, commentCount: 0 },

        // ë ˆê³ 
        { id: 'lego-1', category: 'lego', title: 'ë ˆê³  ëª¨ë“ˆëŸ¬ ë¹Œë”© ì™„ì„±', oneLiner: 'ì£¼ë§ ë™ì•ˆ ì˜¬ì¸í•´ì„œ ì™„ì„±í–ˆìŠµë‹ˆë‹¤.', body: 'ë‹¤ìŒ ëª¨ë“ˆëŸ¬ë„ ë…¸ë¦¬ê³  ìˆì–´ìš”.', author: 'LEGO_city', imageUrl: 'https://images.unsplash.com/photo-1585366119957-e9730b6d0f60?auto=format&fit=crop&w=600&q=80', isHit: true, likeCount: 22, commentCount: 4 },
        { id: 'lego-2', category: 'lego', title: 'ë ˆê³  ìë™ì°¨ ì‹œë¦¬ì¦ˆ ì¶”ê°€', oneLiner: 'ë””ìì¸ ì§„ì§œ ì˜ ë½‘í˜”ìŠµë‹ˆë‹¤.', body: '', author: 'brick_racer', imageUrl: 'https://images.unsplash.com/photo-1569336415962-a4bd9f69cd83?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 9, commentCount: 1 },
        { id: 'lego-3', category: 'lego', title: 'ì•„ì´ë‘ ê°™ì´ ë§ì¶˜ ë ˆê³ ', oneLiner: 'ê°€ì¡± í”„ë¡œì íŠ¸ë¡œ ë”±ì…ë‹ˆë‹¤.', body: '', author: 'family_builder', imageUrl: 'https://images.unsplash.com/photo-1518946222227-364f22132616?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 11, commentCount: 2 },
        { id: 'lego-4', category: 'lego', title: 'ë‹¨ì¢… ì„¸íŠ¸ ì–´ë µê²Œ êµ¬í–ˆìŠµë‹ˆë‹¤', oneLiner: 'ë°•ìŠ¤ë§Œ ë´ë„ í–‰ë³µí•´ìš”.', body: '', author: 'ë‹¨ì¢…í—Œí„°', imageUrl: 'https://images.unsplash.com/photo-1472457897821-70d3819a0e24?auto=format&fit=crop&w=600&q=80', isHit: true, likeCount: 19, commentCount: 3 },
        { id: 'lego-5', category: 'lego', title: 'ë ˆê³  ë¯¸ë‹ˆí”¼ê·œì–´ ëª¨ìŒ', oneLiner: 'ëœë¤ ë½‘ê¸°ì—ì„œ ì›í•˜ë˜ ìºë¦­í„° ë“í…œ!', body: '', author: 'mini_fig', imageUrl: 'https://images.unsplash.com/photo-1559583109-3e79eb8ac642?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 5, commentCount: 1 },
        { id: 'lego-6', category: 'lego', title: 'ì±…ì¥ í•œ ì¹¸ì´ ì „ë¶€ ë ˆê³ ', oneLiner: 'ì´ì œ ìˆ˜ë‚©ì´ ê³ ë¯¼ì…ë‹ˆë‹¤.', body: '', author: 'ìˆ˜ë‚©í•„ìš”', imageUrl: 'https://images.unsplash.com/photo-1587654780291-39c9404d746b?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 4, commentCount: 0 },

        // ìŠ¤í¬ì¸ ì¹´ë“œ
        { id: 'sportscard-1', category: 'sportscard', title: 'ë£¨í‚¤ ì¹´ë“œ PSA 10', oneLiner: 'í‰ìƒ ì†Œì¥ ê°ì…ë‹ˆë‹¤.', body: '', author: 'sports_card_king', imageUrl: 'https://images.unsplash.com/photo-1629904853716-f004320d874c?auto=format&fit=crop&w=600&q=80', isHit: true, likeCount: 30, commentCount: 7 },
        { id: 'sportscard-2', category: 'sportscard', title: 'í•œ ë°•ìŠ¤ì—ì„œ ë‚˜ì˜¨ íˆíŠ¸ ì¹´ë“œ', oneLiner: 'ë¼ì´ë¸Œì—ì„œ ê°™ì´ ì†Œë¦¬ ì§ˆë €ì–´ìš”.', body: '', author: 'box_breaker', imageUrl: 'https://images.unsplash.com/photo-1613771404721-c5b482d3a921?auto=format&fit=crop&w=600&q=80', isHit: true, likeCount: 17, commentCount: 3 },
        { id: 'sportscard-3', category: 'sportscard', title: 'ì˜¨ì¹´ë“œ ì‚¬ì¸ ì¹´ë“œ ìë‘', oneLiner: 'ìŠ¤í‹°ì»¤ ì•„ë‹Œ ì˜¨ì¹´ë“œë¼ ë” ê°’ì§€ë„¤ìš”.', body: '', author: 'auto_sign', imageUrl: 'https://images.unsplash.com/photo-1607326610092-cad42771767d?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 8, commentCount: 1 },
        { id: 'sportscard-4', category: 'sportscard', title: 'ë„˜ë²„ë§ ì¹´ë“œ ëª¨ìœ¼ëŠ” ì¤‘', oneLiner: 'ì´ë²ˆì—” /25 ë“í…œí–ˆìŠµë‹ˆë‹¤.', body: '', author: 'numbered_only', imageUrl: 'https://images.unsplash.com/photo-1554131694-3d917173295e?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 6, commentCount: 0 },
        { id: 'sportscard-5', category: 'sportscard', title: 'ë ˆì „ë“œ ì„ ìˆ˜ í¬í•¨ëœ ì„¸íŠ¸', oneLiner: 'ì–´ë¦´ ë•Œ ë³´ë˜ ì„ ìˆ˜ ì¹´ë“œë¼ ê°íšŒê°€ ìƒˆë¡­ë„¤ìš”.', body: '', author: 'old_school', imageUrl: 'https://images.unsplash.com/photo-1561069934-ee2258988530?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 5, commentCount: 0 },
        { id: 'sportscard-6', category: 'sportscard', title: 'ì»¬ëŸ¬ ë§¤ì¹˜ í‰í–‰ ì¹´ë“œ', oneLiner: 'ìœ ë‹ˆí¼ ì»¬ëŸ¬ë‘ ë”± ë§ì•„ì„œ ì˜ˆì©ë‹ˆë‹¤.', body: '', author: 'colour_match', imageUrl: 'https://images.unsplash.com/photo-1599326124394-b32f5c2309e6?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 9, commentCount: 2 },

        // íŒ¨ì…˜
        { id: 'fashion-1', category: 'fashion', title: 'í¬ê·€ ìŠ¤ë‹ˆì»¤ì¦ˆ ë‚™ì°°', oneLiner: 'ë°•ìŠ¤ ìƒíƒœê¹Œì§€ ì™„ë²½í•©ë‹ˆë‹¤.', body: '', author: 'sneakerhead', imageUrl: 'https://images.unsplash.com/photo-1542291026-7eec264c27ff?auto=format&fit=crop&w=600&q=80', isHit: true, likeCount: 21, commentCount: 4 },
        { id: 'fashion-2', category: 'fashion', title: 'ìŠ¤íŠ¸ë¦¿ ë¸Œëœë“œ í›„ë“œí‹°', oneLiner: 'ì‹¤ë¬¼ì´ í›¨ì”¬ ì˜ˆìœ ì»¬ëŸ¬.', body: '', author: 'street_style', imageUrl: 'https://images.unsplash.com/photo-1523381210434-271e8be1f52b?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 10, commentCount: 1 },
        { id: 'fashion-3', category: 'fashion', title: 'ì•„ì¹´ì´ë¸Œ í‹°ì…”ì¸  ìë‘', oneLiner: 'êµ¬í•˜ê¸° í˜ë“  ì‹œì¦Œ ì œí’ˆì´ì—ìš”.', body: '', author: 'archive_hunter', imageUrl: 'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 7, commentCount: 0 },
        { id: 'fashion-4', category: 'fashion', title: 'í•œì •íŒ ìº¡ ëª¨ì', oneLiner: 'ë°ì¼ë¦¬ë¡œ ì“°ê¸° ì¢‹ì€ í•.', body: '', author: 'cap_collector', imageUrl: 'https://images.unsplash.com/photo-1588850561407-ed78c282e89f?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 4, commentCount: 0 },
        { id: 'fashion-5', category: 'fashion', title: 'ë¹ˆí‹°ì§€ ë°ë‹˜ íŒ¬ì¸ ', oneLiner: 'ì›Œì‹±ê°ì´ ì§„ì§œ ì˜ˆì©ë‹ˆë‹¤.', body: '', author: 'denimlover', imageUrl: 'https://images.unsplash.com/photo-1542272617-08f08630329e?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 6, commentCount: 1 },
        { id: 'fashion-6', category: 'fashion', title: 'ì•„ì›ƒë„ì–´ ì¬í‚·', oneLiner: 'ë°©ìˆ˜ í…ŒìŠ¤íŠ¸ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.', body: '', author: 'camping', imageUrl: 'https://images.unsplash.com/photo-1591047139829-d91aecb6caea?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 3, commentCount: 0 },

        // ê±´ë‹´
        { id: 'gundam-1', category: 'gundam', title: 'MG ê±´ë‹´ ì¡°ë¦½ ì™„ì„±', oneLiner: 'ê´€ì ˆ íŠ¼íŠ¼í•˜ê³  í”„ë¡œí¬ì…˜ ì¢‹ìŠµë‹ˆë‹¤.', body: '', author: 'gunpla_builder', imageUrl: 'https://images.unsplash.com/photo-1614726365723-49cfae9e0963?auto=format&fit=crop&w=600&q=80', isHit: true, likeCount: 16, commentCount: 3 },
        { id: 'gundam-2', category: 'gundam', title: 'RG í”„ë¼ëª¨ë¸ ë””í…Œì¼ ìë‘', oneLiner: 'ì‘ì€ë°ë„ ë””í…Œì¼ì´ ë¯¸ì³¤ì–´ìš”.', body: '', author: 'rg_mania', imageUrl: 'https://images.unsplash.com/photo-1594376991621-69884d316872?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 9, commentCount: 1 },
        { id: 'gundam-3', category: 'gundam', title: 'í”„ë¦¬ë¯¸ì—„ ì»¬ëŸ¬ í•œì •íŒ', oneLiner: 'ë©”íƒˆë¦­ ë„ìƒ‰ì´ ê³ ê¸‰ìŠ¤ëŸ½ìŠµë‹ˆë‹¤.', body: '', author: 'metallic', imageUrl: 'https://images.unsplash.com/photo-1614726365202-03d4f180d983?auto=format&fit=crop&w=600&q=80', isHit: true, likeCount: 13, commentCount: 2 },
        { id: 'gundam-4', category: 'gundam', title: 'ì²« ì—ì–´ë¸ŒëŸ¬ì‹œ ë„ìƒ‰ ê±´ë‹´', oneLiner: 'ì†ìœ¼ë¡œ ì¹ í•˜ëŠ” ë§›ì´ ìˆë„¤ìš”.', body: '', author: 'ë„ìƒ‰ì´ˆë³´', imageUrl: 'https://images.unsplash.com/photo-1560167016-022b78a0258e?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 7, commentCount: 1 },
        { id: 'gundam-5', category: 'gundam', title: 'í¬ì§•ìš© ìŠ¤íƒ ë“œê¹Œì§€ ì„¸íŠ¸', oneLiner: 'ê³µì¤‘ í¬ì¦ˆ ì—°ì¶œì´ ìµœê³ .', body: '', author: 'pose_master', imageUrl: 'https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 5, commentCount: 0 },
        { id: 'gundam-6', category: 'gundam', title: 'MGEX ì‹œë¦¬ì¦ˆ ë„ì „', oneLiner: 'ì¡°ë¦½ ë‚œì´ë„ ìˆì§€ë§Œ ì™„ì„±í•˜ë©´ ë¿Œë“¯í•©ë‹ˆë‹¤.', body: '', author: 'MGEX_challenger', imageUrl: 'https://images.unsplash.com/photo-1606663889134-b1dedb5ed8b7?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 11, commentCount: 2 },

        // íŠ¸ë ˆì´ë”©ì¹´ë“œ
        { id: 'tradingcard-1', category: 'tradingcard', title: 'TCG ì‹œí¬ë¦¿ ë ˆì–´ ì¹´ë“œ', oneLiner: 'í¬ì¼ ë°˜ì§ì„ì´ ì¥ë‚œ ì•„ë‹™ë‹ˆë‹¤.', body: '', author: 'tcg_secret', imageUrl: 'https://images.unsplash.com/photo-1639718727577-43850931934c?auto=format&fit=crop&w=600&q=80', isHit: true, likeCount: 14, commentCount: 3 },
        { id: 'tradingcard-2', category: 'tradingcard', title: 'ë°•ìŠ¤ ëœ¯ë‹¤ê°€ ë‚˜ì˜¨ ì–¼í„°ë„ˆí‹°ë¸Œ ì•„íŠ¸', oneLiner: 'ê·¸ë¦¼ì²´ê°€ ë„ˆë¬´ ë§ˆìŒì— ë“¤ì–´ìš”.', body: '', author: 'alt_art', imageUrl: 'https://images.unsplash.com/photo-1622643626258-c1dbed80e318?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 10, commentCount: 1 },
        { id: 'tradingcard-3', category: 'tradingcard', title: 'í’€ì•„íŠ¸ íŠ¸ë ˆì´ë„ˆ ì¹´ë“œ', oneLiner: 'ì»¬ë ‰ì…˜ì˜ í•˜ì´ë¼ì´íŠ¸ê°€ ìƒê²¼ìŠµë‹ˆë‹¤.', body: '', author: 'trainer_collector', imageUrl: 'https://images.unsplash.com/photo-1607462109225-6b64ae2dd3cb?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 6, commentCount: 0 },
        { id: 'tradingcard-4', category: 'tradingcard', title: 'í•œ íŒ©ì—ì„œ ë”ë¸” íˆíŠ¸', oneLiner: 'ë¼ì´ë¸Œ ì±„íŒ…ì°½ì´ ë‚œë¦¬ ë‚¬ë˜ ê·¸ ìˆœê°„.', body: '', author: 'double_hit', imageUrl: 'https://images.unsplash.com/photo-1613771404721-c5b482d3a921?auto=format&fit=crop&w=600&q=80', isHit: true, likeCount: 18, commentCount: 4 },
        { id: 'tradingcard-5', category: 'tradingcard', title: 'ì˜¤ë˜ ì°¾ë˜ êµ¬ ì‹œë¦¬ì¦ˆ ì¹´ë“œ', oneLiner: 'ìƒíƒœê¹Œì§€ ì¤€ìˆ˜í•´ì„œ ë§Œì¡±í•©ë‹ˆë‹¤.', body: '', author: 'old_series', imageUrl: 'https://images.unsplash.com/photo-1554131694-3d917173295e?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 5, commentCount: 1 },
        { id: 'tradingcard-6', category: 'tradingcard', title: 'ì»¤ìŠ¤í…€ ìŠ¬ë¦¬ë¸Œì— ë„£ì–´ë´¤ì–´ìš”', oneLiner: 'ìŠ¬ë¦¬ë¸Œê¹Œì§€ ë§ì¶°ì£¼ë‹ˆ ë” ì˜ˆë»ìš”.', body: '', author: 'sleeve_mania', imageUrl: 'https://images.unsplash.com/photo-1607326610092-cad42771767d?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 3, commentCount: 0 },

        // ëª…í’ˆ
        { id: 'luxury-1', category: 'luxury', title: 'ë¹ˆí‹°ì§€ ëª…í’ˆ ê°€ë°©', oneLiner: 'ì»¨ë””ì…˜ ì •ë§ ì¢‹ìŠµë‹ˆë‹¤.', body: '', author: 'lux_vintage', imageUrl: 'https://images.unsplash.com/photo-1584917865442-de89df76afd3?auto=format&fit=crop&w=600&q=80', isHit: true, likeCount: 19, commentCount: 4 },
        { id: 'luxury-2', category: 'luxury', title: 'í•œì •íŒ ì§€ê°‘', oneLiner: 'ì»¬ëŸ¬ê°€ í”í•˜ì§€ ì•Šì•„ì„œ ë” ë§ˆìŒì— ë“¤ì–´ìš”.', body: '', author: 'walletlover', imageUrl: 'https://images.unsplash.com/photo-1627123424574-724758594e93?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 8, commentCount: 1 },
        { id: 'luxury-3', category: 'luxury', title: 'ì‹œê³„ ì»¬ë ‰ì…˜ì— ìƒˆ ë©¤ë²„', oneLiner: 'ì¤„ êµì²´í•´ì„œ ë°ì¼ë¦¬ë¡œ ì°©ìš© ì¤‘ì…ë‹ˆë‹¤.', body: '', author: 'watch_addict', imageUrl: 'https://images.unsplash.com/photo-1524592094714-0f0654e20314?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 12, commentCount: 2 },
        { id: 'luxury-4', category: 'luxury', title: 'ì‹¤í‚¤í•œ ìŠ¤ì¹´í”„', oneLiner: 'í¬ì¸íŠ¸ ì•„ì´í…œìœ¼ë¡œ ìµœê³ .', body: '', author: 'silk_scarf', imageUrl: 'https://images.unsplash.com/photo-1582142327595-5154534c1a74?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 4, commentCount: 0 },
        { id: 'luxury-5', category: 'luxury', title: 'ëª…í’ˆ ë²¨íŠ¸ ìƒˆë¡œ ì¥ë§Œ', oneLiner: 'í—ˆë¦¬ ì‚¬ì´ì¦ˆ ë”± ë§ì•„ì„œ ê¸°ë¶„ ì¢‹ë„¤ìš”.', body: '', author: 'beltcol', imageUrl: 'https://images.unsplash.com/photo-1624222247344-550fb60583dc?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 5, commentCount: 1 },
        { id: 'luxury-6', category: 'luxury', title: 'í´ë˜ì‹ ì¹´ë“œ ì§€ê°‘', oneLiner: 'ì‹¬í”Œí•´ì„œ ì˜¤ë˜ ì“¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤.', body: '', author: 'simple_lux', imageUrl: 'https://images.unsplash.com/photo-1605733513597-a8f8341084e6?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 3, commentCount: 0 },

        // ìš°í‘œ
        { id: 'stamp-1', category: 'stamp', title: 'ì˜¬ë“œ ì½”ë¦¬ì•„ ìš°í‘œ ì„¸íŠ¸', oneLiner: 'ì—­ì‚¬ê°€ ëŠê»´ì§€ëŠ” ë””ìì¸.', body: '', author: 'stamp_history', imageUrl: 'https://images.unsplash.com/photo-1583324113626-70df0f4deaab?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 7, commentCount: 1 },
        { id: 'stamp-2', category: 'stamp', title: 'í•œì • ê¸°ë…ìš°í‘œ', oneLiner: 'ë°œí–‰ ìˆ˜ëŸ‰ì´ ì ì–´ì„œ ë” ê·€í•´ìš”.', body: '', author: 'limited_stamp', imageUrl: 'https://images.unsplash.com/photo-1603792907191-89e55f70099a?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 6, commentCount: 1 },
        { id: 'stamp-3', category: 'stamp', title: 'ë™ë¬¼ ì‹œë¦¬ì¦ˆ ìš°í‘œ', oneLiner: 'ì•„ì´ë‘ ê°™ì´ ëª¨ìœ¼ëŠ” ì¤‘ì…ë‹ˆë‹¤.', body: '', author: 'animal_stamp', imageUrl: 'https://images.unsplash.com/photo-1592422164092-c13232642c09?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 4, commentCount: 0 },
        { id: 'stamp-4', category: 'stamp', title: 'ì†Œí˜• ì‹œíŠ¸ ìš°í‘œ', oneLiner: 'ì•¡ìì— ë„£ì–´ ê±¸ì–´ë‘ì—ˆì–´ìš”.', body: '', author: 'frame_it', imageUrl: 'https://images.unsplash.com/photo-1579273166152-d725a4e2b755?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 5, commentCount: 0 },
        { id: 'stamp-5', category: 'stamp', title: 'ì„¸ê³„ ë„ì‹œ ì‹œë¦¬ì¦ˆ', oneLiner: 'ì§€ë„ì™€ í•¨ê»˜ ì „ì‹œ ì¤‘ì…ë‹ˆë‹¤.', body: '', author: 'world_stamp', imageUrl: 'https://images.unsplash.com/photo-1529338296731-c4280a44fc4e?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 3, commentCount: 0 },
        { id: 'stamp-6', category: 'stamp', title: 'í¬ê·€ ì˜¤ë¥˜ ì¸ì‡„ ìš°í‘œ', oneLiner: 'ì‘ì€ ì˜¤íƒ€ê°€ ì˜¤íˆë ¤ ë§¤ë ¥ì .', body: '', author: 'error_stamp', imageUrl: 'https://images.unsplash.com/photo-1620401537439-90f9dd52fe4f?auto=format&fit=crop&w=600&q=80', isHit: true, likeCount: 11, commentCount: 2 },

        // CD / LP
        { id: 'cdlp-1', category: 'cdlp', title: 'ì´ˆíŒ LP ë ˆì½”ë“œ', oneLiner: 'ë°”ëŠ˜ ì˜¬ë¦¬ëŠ” ìˆœê°„ ì†Œë¦„.', body: '', author: 'vinyl_only', imageUrl: 'https://images.unsplash.com/photo-1614613535308-eb5fbd3d2c17?auto=format&fit=crop&w=600&q=80', isHit: true, likeCount: 20, commentCount: 4 },
        { id: 'cdlp-2', category: 'cdlp', title: 'ì‚¬ì¸ì´ ë“¤ì–´ê°„ CD', oneLiner: 'íŒ¬ì´ë¼ë©´ í•„ìˆ˜ ì†Œì¥í…œ.', body: '', author: 'signed_cd', imageUrl: 'https://images.unsplash.com/photo-1619983081563-430f63602796?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 9, commentCount: 1 },
        { id: 'cdlp-3', category: 'cdlp', title: 'í•œì •íŒ ì»¬ëŸ¬ ë°”ì´ë‹', oneLiner: 'í”Œë ˆì‰ë³´ë‹¤ ëˆˆìœ¼ë¡œ ë¨¼ì € ì¦ê¸°ê²Œ ë©ë‹ˆë‹¤.', body: '', author: 'color_vinyl', imageUrl: 'https://images.unsplash.com/photo-1459749411177-3c2ea0436964?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 8, commentCount: 1 },
        { id: 'cdlp-4', category: 'cdlp', title: 'ë°•ìŠ¤ ì„¸íŠ¸ ì•¨ë²”', oneLiner: 'ë¶ë¦¿ êµ¬ì„±ê¹Œì§€ ì™„ë²½.', body: '', author: 'boxsetlover', imageUrl: 'https://images.unsplash.com/photo-1514525253440-b393452e8d26?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 6, commentCount: 0 },
        { id: 'cdlp-5', category: 'cdlp', title: 'ì¤‘ê³ ì§€ë§Œ ë³´ê´€ ìƒíƒœ ì¢‹ì€ LP', oneLiner: 'ìŠ¤í¬ë˜ì¹˜ ê±°ì˜ ì—†ìŠµë‹ˆë‹¤.', body: '', author: 'secondhand_vinyl', imageUrl: 'https://images.unsplash.com/photo-1460723237483-7a6dc9d0b212?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 5, commentCount: 0 },
        { id: 'cdlp-6', category: 'cdlp', title: 'ë¼ì´ë¸Œ ì•¨ë²” CD', oneLiner: 'ê³µì—°ì¥ ë¶„ìœ„ê¸°ê°€ ê·¸ëŒ€ë¡œ ëŠê»´ì ¸ìš”.', body: '', author: 'live_record', imageUrl: 'https://images.unsplash.com/photo-1493225255756-d9584f8606e9?auto=format&fit=crop&w=600&q=80', isHit: false, likeCount: 4, commentCount: 0 }
      ];

      const loginPage = document.getElementById('login-page');
      const loginForm = document.getElementById('login-form');
      const nicknameInput = document.getElementById('login-nickname');
      const app = document.getElementById('app');
      const nicknameLabels = document.querySelectorAll('.current-nickname');
      const roleLabel = document.getElementById('current-role-label');
      const hitShareBtn = document.getElementById('hit-share-btn');

      const navLinks = document.querySelectorAll('.nav-link');
      const sections = document.querySelectorAll('.page-section');
      const categoryChips = document.querySelectorAll('.category-filter .chip');
      const feedTabButtons = document.querySelectorAll('[data-feed-tab]');

      const categoryIdSelect = document.getElementById('category-id-select');
      const categoryIdInput = document.getElementById('category-id-input');
      const categoryIdSearchBtn = document.getElementById('category-id-search-btn');

      const feedSortSelect = document.getElementById('feed-sort-select');

      const feedList = document.getElementById('feed-list');
      const backToFeedBtn = document.getElementById('back-to-feed');

      const detailImage = document.getElementById('detail-image');
      const detailCategory = document.getElementById('detail-category');
      const detailHitBadge = document.getElementById('detail-hit-badge');
      const detailTitle = document.getElementById('detail-title');
      const detailDesc = document.getElementById('detail-desc');
      const detailBody = document.getElementById('detail-body');
      const detailAvatar = document.getElementById('detail-avatar');
      const detailNickname = document.getElementById('detail-nickname');
      const detailSubtext = document.getElementById('detail-subtext');
      const detailUserInline = document.getElementById('detail-user-inline');
      const detailLikeBtn = document.getElementById('detail-like-btn');
      const detailEditBtn = document.getElementById('detail-edit-btn');
      const detailDeleteBtn = document.getElementById('detail-delete-btn');

      const commentList = document.getElementById('comment-list');
      const commentForm = document.getElementById('comment-form');
      const commentInput = document.getElementById('comment-input');

      const newPostForm = document.getElementById('new-post-form');
      const newImageInput = document.getElementById('new-image');
      const newCategorySelect = document.getElementById('new-category');
      const newTitleInput = document.getElementById('new-title');
      const newDescInput = document.getElementById('new-desc');
      const newBodyInput = document.getElementById('new-body');
      const submitPostBtn = document.getElementById('submit-post-btn');

      // NEW: Preview Elements
      const previewContainer = document.getElementById('preview-container');
      const imagePreview = document.getElementById('image-preview');

      const myTabButtons = document.querySelectorAll('[data-my-tab]');
      const myPostsContainer = document.getElementById('my-posts');
      const likedPostsContainer = document.getElementById('liked-posts');

      const searchInput = document.getElementById('global-search-input');

      const homeTopBragList = document.getElementById('home-top-brag-list');
      const homeRecoList = document.getElementById('home-reco-list');
      const recoUsernameSpan = document.getElementById('reco-username');

      const profileAvatar = document.getElementById('profile-avatar');
      const profileNickname = document.getElementById('profile-nickname');
      const profileRolePill = document.getElementById('profile-role-pill');
      const profileOperatorBadge = document.getElementById('profile-operator-badge');
      const profileBio = document.getElementById('profile-bio');
      const profilePreferredCategories = document.getElementById('profile-preferred-categories');
      const profileFollowBtn = document.getElementById('profile-follow-btn');
      const profileBlockBtn = document.getElementById('profile-block-btn');
      const profileRecentPosts = document.getElementById('profile-recent-posts');
      const profileDealerCard = document.getElementById('profile-dealer-card');
      const profileDealerRating = document.getElementById('profile-dealer-rating');
      const profileDealerCategories = document.getElementById('profile-dealer-categories');
      const profileLiveLink = document.getElementById('profile-live-link');
      const profileRecentSub = document.getElementById('profile-recent-sub');

      // NEW: Profile Elements
      const profileCover = document.getElementById('profile-cover');
      const profileStatFollowers = document.getElementById('profile-stat-followers');
      const profileStatFollowing = document.getElementById('profile-stat-following');
      const profileStatLikes = document.getElementById('profile-stat-likes');
      const profileBadges = document.getElementById('profile-badges');

      const reportModal = document.getElementById('report-modal');
      const reportTargetText = document.getElementById('report-target-text');
      const reportSubmitBtn = document.getElementById('report-submit-btn');
      const reportCancelBtn = document.getElementById('report-cancel-btn');
      const pinnedDetailBtn = document.getElementById('open-pinned-detail');

      let currentUser = null;
      let currentPostId = null;
      let editingPostId = null;
      let currentHitFilter = 'all';
      let newPostMode = 'brag';
      let currentSort = 'latest';
      let currentProfileNickname = null;
      let currentCategoryFilter = 'all';
      let creationCounter = 0;
      let reportTarget = null;

      const posts = {};
      const commentsByPostId = {};
      const followingUsers = new Set();
      const followingDealers = new Set();
      const blockedUsers = new Set();
      const userProfiles = {};

      function getAvatarInitial(nickname) {
        if (!nickname) return '?';
        return nickname.slice(0, 2);
      }

      function isDealerNickname(nickname) {
        if (!nickname) return false;
        if (currentUser && currentUser.nickname === nickname && currentUser.role === 'seller') {
          return true;
        }
        return DEALER_AUTHORS.has(nickname);
      }

      function showOnlySection(id) {
        sections.forEach(sec => {
          sec.classList.toggle('hidden', sec.id !== id);
        });
      }

      function activateNavFor(id) {
        navLinks.forEach(btn => {
          btn.classList.toggle('active', btn.dataset.target === id);
        });
      }

      function createPostFromData(data, isOwn) {
        const post = Object.assign({}, data);
        post.categoryLabel = CATEGORY_CONFIG[post.category] || 'ê¸°íƒ€';
        post.likeCount = typeof post.likeCount === 'number' ? post.likeCount : 0;
        post.commentCount = typeof post.commentCount === 'number' ? post.commentCount : 0;
        post.likedByCurrentUser = !!post.likedByCurrentUser;
        post.isHit = !!post.isHit;
        post.sourceType = post.sourceType || (post.isHit ? 'hit' : 'brag');
        post.isOwn = !!isOwn;
        post.author = post.author || '';
        post.createdAt = typeof post.createdAt === 'number'
          ? post.createdAt
          : (++creationCounter);
        posts[post.id] = post;
        return post;
      }

      function renderPostCard(post) {
        const article = document.createElement('article');
        article.className = 'post-card';
        article.dataset.id = post.id;
        article.dataset.category = post.category;
        article.dataset.categoryLabel = post.categoryLabel;
        article.dataset.author = post.author || '';
        article.dataset.oneLiner = post.oneLiner || '';
        article.dataset.body = post.body || '';
        article.dataset.image = post.imageUrl || '';
        article.dataset.createdAt = post.createdAt || 0;

        const avatarInitial = getAvatarInitial(post.author);
        const isHit = !!post.isHit;

        const descText = post.body
          ? post.oneLiner + ' Â· ' + (post.body.length > 40 ? post.body.substring(0, 40) + 'â€¦' : post.body)
          : post.oneLiner;

        const isDealer = isDealerNickname(post.author);
        const userTypeLabel = isDealer ? 'ë”œëŸ¬' : 'ì»¬ë ‰í„°';

        const showOwnerTools = currentUser && post.author === currentUser.nickname;

        article.innerHTML =
          '<div class="post-image" style="background-image:url(\''
          + (post.imageUrl || 'https://via.placeholder.com/600x380?text=BidderLive+Item')
          + '\');"></div>'
          + '<div class="post-body">'
          + '  <div class="post-meta">'
          + '    <span class="category-pill">' + post.categoryLabel + '</span>'
          + (isHit ? '<span class="badge badge-hit">HIT</span>' : '')
          + '  </div>'
          + '  <h3 class="post-title">' + (post.title || '') + '</h3>'
          + '  <p class="post-desc">' + (descText || '') + '</p>'
          + '  <div class="post-footer">'
          + '    <div class="user-inline profile-link" data-nickname="' + (post.author || '') + '">'
          + '      <div class="avatar-circle">' + avatarInitial + '</div>'
          + '      <div>'
          + '        <div class="nickname">' + (post.author || '') + '</div>'
          + '        <div class="sub">' + post.categoryLabel + ' Â· ' + userTypeLabel + '</div>'
          + '      </div>'
          + '    </div>'
          + '    <div class="social-inline">'
          + '      <button class="icon-btn like-btn" data-liked="'
          + (post.likedByCurrentUser ? 'true' : 'false') + '">'
          + '        <span class="like-icon">' + (post.likedByCurrentUser ? 'â™¥' : 'â™¡') + '</span>'
          + '        <span class="like-count">' + post.likeCount + '</span>'
          + '      </button>'
          + '      <button class="icon-btn open-detail-btn">ğŸ’¬ ' + post.commentCount + '</button>'
          + '      <button class="icon-btn report-post-btn">ì‹ ê³ </button>'
          + '    </div>'
          + '  </div>'
          + (showOwnerTools
            ? '<div class="owner-tools">'
            + '<span class="owner-pill">MY</span>'
            + '<button type="button" class="text-btn edit-post-btn">ìˆ˜ì •</button>'
            + '<button type="button" class="text-btn delete-post-btn">ì‚­ì œ</button>'
            + '</div>'
            : '')
          + '</div>';

        return article;
      }

      function applyCategoryFilter() {
        const cards = document.querySelectorAll('#feed-list .post-card');
        cards.forEach(card => {
          const cardCategory = card.dataset.category;
          const match = currentCategoryFilter === 'all'
            ? true
            : cardCategory === currentCategoryFilter;
          card.classList.toggle('hidden-by-category', !match);
        });
      }

      function applyHitFilter() {
        const cards = document.querySelectorAll('#feed-list .post-card');
        cards.forEach(card => {
          const postId = card.dataset.id;
          const post = posts[postId];
          if (!post) return;
          const isHit = !!post.isHit;
          const author = post.author || '';
          let match = true;

          if (currentHitFilter === 'brag') {
            match = !isHit;
          } else if (currentHitFilter === 'hit') {
            match = isHit;
          } else if (currentHitFilter === 'followed') {
            const dealer = isDealerNickname(author);
            match = dealer && followingDealers.has(author);
          }

          card.classList.toggle('hidden-by-type', !match);
        });
      }

      function applySort() {
        if (!feedList) return;
        const cards = Array.from(feedList.querySelectorAll('.post-card'));
        if (!cards.length) return;

        cards.sort((a, b) => {
          const postA = posts[a.dataset.id];
          const postB = posts[b.dataset.id];
          if (!postA || !postB) return 0;

          if (currentSort === 'likes') {
            const diff = (postB.likeCount || 0) - (postA.likeCount || 0);
            if (diff !== 0) return diff;
          } else if (currentSort === 'comments') {
            const diff = (postB.commentCount || 0) - (postA.commentCount || 0);
            if (diff !== 0) return diff;
          }
          return (postB.createdAt || 0) - (postA.createdAt || 0);
        });

        cards.forEach(card => feedList.appendChild(card));
      }

      function applySearchFilter() {
        if (!searchInput) return;
        const term = searchInput.value.trim().toLowerCase();
        const cards = document.querySelectorAll('#feed-list .post-card, #my-posts .post-card, #liked-posts .post-card');
        cards.forEach(card => {
          const title = card.querySelector('.post-title')?.textContent || '';
          const desc = card.querySelector('.post-desc')?.textContent || '';
          const author = card.dataset.author || '';
          const categoryLabel = card.dataset.categoryLabel || '';
          const haystack = (title + ' ' + desc + ' ' + author + ' ' + categoryLabel).toLowerCase();
          const match = !term || haystack.includes(term);
          card.classList.toggle('hidden-by-search', !match);
        });
      }

      function applyBlockFilter() {
        const postsCards = document.querySelectorAll('.post-card');
        postsCards.forEach(card => {
          const author = card.dataset.author || '';
          const blocked = blockedUsers.has(author);
          card.classList.toggle('hidden-by-block', blocked);
        });

        const commentItems = document.querySelectorAll('.comment-item');
        commentItems.forEach(item => {
          const nicknameEl = item.querySelector('.nickname');
          const nick = nicknameEl ? nicknameEl.textContent.trim() : '';
          const blocked = blockedUsers.has(nick);
          item.classList.toggle('hidden-by-block', blocked);
        });

        const topBragCards = document.querySelectorAll('.top-brag-card');
        topBragCards.forEach(card => {
          const author = card.dataset.author || '';
          const blocked = blockedUsers.has(author);
          card.classList.toggle('hidden-by-block', blocked);
        });
      }

      function renderHomeTopBrags() {
        if (!homeTopBragList) return;
        homeTopBragList.innerHTML = '';

        const allPosts = Object.values(posts)
          .filter(p => !p.isHit)
          .filter(p => !blockedUsers.has(p.author || ''));

        if (!allPosts.length) {
          const p = document.createElement('p');
          p.className = 'empty-text';
          p.textContent = 'ì•„ì§ ìë‘ê¸€ì´ ì¶©ë¶„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
          homeTopBragList.appendChild(p);
          return;
        }

        allPosts.sort((a, b) => (b.likeCount || 0) - (a.likeCount || 0));
        const top3 = allPosts.slice(0, 3);

        top3.forEach((post, index) => {
          const card = document.createElement('div');
          card.className = 'top-brag-card';
          card.dataset.id = post.id;
          card.dataset.author = post.author || '';

          // Rank Badge
          const rank = index + 1;
          const badgeHtml = `<div class="rank-badge rank-${rank}">${rank}</div>`;

          card.innerHTML =
            badgeHtml
            + '<div class="top-brag-thumb" style="background-image:url(\''
            + (post.imageUrl || 'https://via.placeholder.com/600x380?text=BidderLive+Item')
            + '\');"></div>'
            + '<div class="top-brag-body">'
            + '  <div class="top-brag-meta">'
            + '    <span class="top-brag-category">' + (post.categoryLabel || '') + '</span>'
            + '    <span class="top-brag-likes">â™¥ ' + (post.likeCount || 0) + '</span>'
            + '  </div>'
            + '  <div class="top-brag-title">' + (post.title || '') + '</div>'
            + '  <div class="top-brag-author">' + (post.author || '') + '</div>'
            + '</div>';
          homeTopBragList.appendChild(card);
        });

        applyBlockFilter();
      }

      function renderHomeRecommendations() {
        if (!homeRecoList) return;

        homeRecoList.innerHTML = '';

        if (!currentUser) {
          if (recoUsernameSpan) {
            recoUsernameSpan.textContent = 'OO';
          }
          const p = document.createElement('p');
          p.className = 'empty-text';
          p.textContent = 'ë¡œê·¸ì¸í•˜ë©´ ë§ì¶¤ ì¶”ì²œ ìë‘ê¸€ì„ ë³¼ ìˆ˜ ìˆì–´ìš”.';
          homeRecoList.appendChild(p);
          return;
        }

        if (recoUsernameSpan) {
          recoUsernameSpan.textContent = currentUser.nickname;
        }

        const nick = currentUser.nickname;

        const likedPosts = Object.values(posts).filter(p => p.likedByCurrentUser);
        const ownPosts = Object.values(posts).filter(p => p.author === nick);

        const basePosts = likedPosts.length ? likedPosts : ownPosts;
        let preferredCategories = null;

        if (basePosts.length) {
          preferredCategories = Array.from(new Set(basePosts.map(p => p.category)));
        }

        let pool = Object.values(posts).filter(p => p.author !== nick);

        if (preferredCategories && preferredCategories.length) {
          pool = pool.filter(p => preferredCategories.includes(p.category));
        }

        pool = pool.filter(p => !blockedUsers.has(p.author || ''));

        if (!pool.length) {
          const p = document.createElement('p');
          p.className = 'empty-text';
          p.textContent = 'ê´€ì‹¬ ì¹´í…Œê³ ë¦¬ ê¸°ë°˜ ì¶”ì²œì´ ì•„ì§ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì–‘í•œ ìë‘ê¸€ì— ì¢‹ì•„ìš”ë¥¼ ëˆŒëŸ¬ë³´ì„¸ìš”!';
          homeRecoList.appendChild(p);
          return;
        }

        pool.sort((a, b) => (b.likeCount || 0) - (a.likeCount || 0));
        const picks = pool.slice(0, 3);

        picks.forEach(post => {
          const card = document.createElement('div');
          card.className = 'top-brag-card';
          card.dataset.id = post.id;
          card.dataset.author = post.author || '';
          card.innerHTML =
            '<div class="top-brag-thumb" style="background-image:url(\''
            + (post.imageUrl || 'https://via.placeholder.com/600x380?text=BidderLive+Item')
            + '\');"></div>'
            + '<div class="top-brag-body">'
            + '  <div class="top-brag-meta">'
            + '    <span class="top-brag-category">' + (post.categoryLabel || '') + '</span>'
            + '    <span class="top-brag-likes">â™¥ ' + (post.likeCount || 0) + '</span>'
            + '  </div>'
            + '  <div class="top-brag-title">' + (post.title || '') + '</div>'
            + '  <div class="top-brag-author">' + (post.author || '') + '</div>'
            + '</div>';
          homeRecoList.appendChild(card);
        });

        applyBlockFilter();
      }

      function getOrBuildUserProfile(nickname) {
        if (!nickname) return null;
        let profile = userProfiles[nickname];
        const isDealer = isDealerNickname(nickname);
        const isOperator = nickname === 'ìš´ì˜ì' || nickname === 'ê´€ë¦¬ì' || nickname.toLowerCase().includes('admin');

        const postsByUser = Object.values(posts).filter(p => p.author === nickname);
        const categoryKeys = Array.from(new Set(postsByUser.map(p => p.category))).filter(Boolean);
        const preferredCategories = categoryKeys.map(key => CATEGORY_CONFIG[key] || key);

        // Calculate total likes received
        const totalLikes = postsByUser.reduce((sum, p) => sum + (p.likeCount || 0), 0);

        if (!profile) {
          profile = {
            nickname,
            isDealer,
            isOperator,
            preferredCategories,
            rating: isDealer ? 4.8 : null,
            dealerCategories: preferredCategories.slice(0, 3),
            liveUrl: isDealer ? '#' : null,
            bio: '',
            followers: Math.floor(Math.random() * 500) + 10,
            following: Math.floor(Math.random() * 100) + 5,
            totalLikes: totalLikes,
            badges: []
          };

          // Assign random badges
          if (isDealer) profile.badges.push('ì¸ì¦ ë”œëŸ¬');
          if (postsByUser.length > 5) profile.badges.push('í—¤ë¹„ ì—…ë¡œë”');
          if (totalLikes > 50) profile.badges.push('ì¸ê¸° ìœ ì €');
          if (profile.badges.length === 0) profile.badges.push('ìƒˆì‹¹ ë©¤ë²„');

        } else {
          profile.isDealer = isDealer;
          profile.isOperator = isOperator;
          profile.preferredCategories = preferredCategories;
          profile.totalLikes = totalLikes; // Update likes as they might change

          if (isDealer && !profile.rating) profile.rating = 4.8;
          if (isDealer && (!profile.dealerCategories || !profile.dealerCategories.length)) {
            profile.dealerCategories = preferredCategories.slice(0, 3);
          }
        }

        if (!profile.bio) {
          if (currentUser && currentUser.nickname === nickname) {
            profile.bio = currentUser.role === 'seller'
              ? 'ë¹„ë”ë¼ì´ë¸Œì—ì„œ ë¼ì´ë¸Œì™€ ê²½ë§¤ë¥¼ ì§„í–‰í•˜ëŠ” ë”œëŸ¬ì…ë‹ˆë‹¤.'
              : 'ë¹„ë”ë¼ì´ë¸Œì—ì„œ ë‚™ì°°í…œì„ ëª¨ìœ¼ëŠ” ì»¬ë ‰í„°ì…ë‹ˆë‹¤.';
          } else {
            profile.bio = isDealer
              ? 'ë¹„ë”ë¼ì´ë¸Œì—ì„œ í™œë™í•˜ëŠ” ë”œëŸ¬ ê³„ì •ì…ë‹ˆë‹¤.'
              : 'ë¹„ë”ë¼ì´ë¸Œ ì»¤ë®¤ë‹ˆí‹°ì—ì„œ í™œë™ ì¤‘ì¸ ì‚¬ìš©ìì…ë‹ˆë‹¤.';
          }
        }

        userProfiles[nickname] = profile;
        return profile;
      }

      function openProfile(nickname) {
        if (!nickname) return;
        const profile = getOrBuildUserProfile(nickname);
        if (!profile) return;

        currentProfileNickname = nickname;

        if (profileAvatar) {
          profileAvatar.textContent = getAvatarInitial(nickname);
        }
        if (profileNickname) {
          profileNickname.textContent = nickname;
        }
        if (profileRolePill) {
          profileRolePill.textContent = profile.isDealer ? 'ë”œëŸ¬' : 'ì»¬ë ‰í„°';
        }
        if (profileOperatorBadge) {
          profileOperatorBadge.classList.toggle('hidden', !profile.isOperator);
        }
        if (profileBio) {
          profileBio.textContent = profile.bio || '';
        }

        // NEW: Update Stats & Badges
        if (profileStatFollowers) profileStatFollowers.textContent = profile.followers || 0;
        if (profileStatFollowing) profileStatFollowing.textContent = profile.following || 0;
        if (profileStatLikes) profileStatLikes.textContent = profile.totalLikes || 0;

        if (profileBadges) {
          profileBadges.innerHTML = '';
          if (profile.badges && profile.badges.length) {
            profile.badges.forEach(badge => {
              const span = document.createElement('span');
              span.className = 'profile-badge';
              span.innerHTML = '<span>ğŸ†</span> ' + badge;
              profileBadges.appendChild(span);
            });
          } else {
            const span = document.createElement('span');
            span.className = 'small-helper';
            span.textContent = 'ì•„ì§ íšë“í•œ ë°°ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.';
            profileBadges.appendChild(span);
          }
        }

        // Random cover image based on nickname length (pseudo-random)
        if (profileCover) {
          const seed = nickname.length % 5;
          const covers = [
            'https://images.unsplash.com/photo-1579546929518-9e396f3cc809?auto=format&fit=crop&w=800&q=80',
            'https://images.unsplash.com/photo-1557683316-973673baf926?auto=format&fit=crop&w=800&q=80',
            'https://images.unsplash.com/photo-1550684848-fac1c5b4e853?auto=format&fit=crop&w=800&q=80',
            'https://images.unsplash.com/photo-1614850523459-c2f4c699c52e?auto=format&fit=crop&w=800&q=80',
            'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?auto=format&fit=crop&w=800&q=80'
          ];
          profileCover.style.backgroundImage = `url('${covers[seed]}')`;
        }

        if (profilePreferredCategories) {
          profilePreferredCategories.innerHTML = '';
          if (profile.preferredCategories && profile.preferredCategories.length) {
            profile.preferredCategories.forEach(label => {
              const chip = document.createElement('span');
              chip.className = 'chip';
              chip.textContent = label;
              profilePreferredCategories.appendChild(chip);
            });
          } else {
            const span = document.createElement('span');
            span.className = 'small-helper';
            span.textContent = 'ì•„ì§ ì„ í˜¸ ì¹´í…Œê³ ë¦¬ê°€ ì •ë¦¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
            profilePreferredCategories.appendChild(span);
          }
        }

        const isSelf = currentUser && currentUser.nickname === nickname;
        if (!currentUser || isSelf) {
          if (profileFollowBtn) profileFollowBtn.classList.add('hidden');
          if (profileBlockBtn) profileBlockBtn.classList.add('hidden');
        } else {
          if (profileFollowBtn) {
            profileFollowBtn.classList.remove('hidden');
            const isDealer = profile.isDealer;
            const followed = isDealer
              ? followingDealers.has(nickname)
              : followingUsers.has(nickname);
            profileFollowBtn.textContent = followed
              ? 'íŒ”ë¡œìš° ì·¨ì†Œ'
              : isDealer
                ? 'ë”œëŸ¬ íŒ”ë¡œìš°'
                : 'ì‚¬ìš©ì íŒ”ë¡œìš°';
          }
          if (profileBlockBtn) {
            profileBlockBtn.classList.remove('hidden');
            const blocked = blockedUsers.has(nickname);
            profileBlockBtn.textContent = blocked ? 'ì°¨ë‹¨ í•´ì œ' : 'ì°¨ë‹¨í•˜ê¸°';
          }
        }

        if (profileDealerCard) {
          if (profile.isDealer) {
            profileDealerCard.classList.remove('hidden');
            if (profileDealerRating) {
              profileDealerRating.textContent = profile.rating != null ? profile.rating : '4.8';
            }
            if (profileDealerCategories) {
              profileDealerCategories.innerHTML = '';
              if (profile.dealerCategories && profile.dealerCategories.length) {
                profile.dealerCategories.forEach(label => {
                  const chip = document.createElement('span');
                  chip.className = 'chip';
                  chip.textContent = label;
                  profileDealerCategories.appendChild(chip);
                });
              }
            }
            if (profileLiveLink) {
              profileLiveLink.href = profile.liveUrl || '#';
            }
          } else {
            profileDealerCard.classList.add('hidden');
          }
        }

        if (profileRecentPosts) {
          profileRecentPosts.innerHTML = '';
          const postsByUser = Object.values(posts)
            .filter(p => p.author === nickname)
            .sort((a, b) => (b.createdAt || 0) - (a.createdAt || 0));
          if (!postsByUser.length) {
            const p = document.createElement('p');
            p.className = 'empty-text';
            p.textContent = 'ì‘ì„±í•œ ìë‘ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.';
            profileRecentPosts.appendChild(p);
          } else {
            postsByUser.slice(0, 4).forEach(post => {
              const card = renderPostCard(post);
              profileRecentPosts.appendChild(card);
            });
          }
        }

        if (profileRecentSub) {
          profileRecentSub.textContent =
            nickname + ' ë‹˜ì´ ì˜¬ë¦° ìµœê·¼ ìë‘ê¸€ì…ë‹ˆë‹¤.';
        }

        showOnlySection('profile-section');
        activateNavFor('profile-section');
        applyBlockFilter();
        applySearchFilter();
      }

      function openReportModal(target) {
        reportTarget = target;
        if (!reportModal) return;
        if (reportTargetText) {
          if (!target) {
            reportTargetText.textContent = '';
          } else {
            const label = target.type === 'comment' ? 'ëŒ“ê¸€' : 'ê²Œì‹œê¸€';
            let text = label;
            if (target.nickname) {
              text += ' Â· ì‘ì„±ì ' + target.nickname;
            }
            if (target.postId) {
              text += ' Â· ID: ' + target.postId;
            }
            reportTargetText.textContent = text;
          }
        }
        reportModal.classList.remove('hidden');
      }

      function closeReportModal() {
        if (!reportModal) return;
        reportModal.classList.add('hidden');
        reportTarget = null;
      }

      function mountInitialPosts() {
        TEST_POSTS.forEach(data => {
          const post = createPostFromData(data, false);
          const card = renderPostCard(post);
          feedList.appendChild(card);
        });
        applySort();
        applyCategoryFilter();
        applyBlockFilter();
        applySearchFilter();
        renderHomeTopBrags();
        renderHomeRecommendations();
      }

      function refreshOwnerToolsForAllCards() {
        const cards = document.querySelectorAll('.post-card');
        cards.forEach(card => {
          const author = card.dataset.author || '';
          const ownerTools = card.querySelector('.owner-tools');
          const isOwner = currentUser && author === currentUser.nickname;

          if (ownerTools && !isOwner) {
            ownerTools.remove();
          } else if (!ownerTools && isOwner) {
            const tools = document.createElement('div');
            tools.className = 'owner-tools';
            tools.innerHTML =
              '<span class="owner-pill">MY</span>'
              + '<button type="button" class="text-btn edit-post-btn">ìˆ˜ì •</button>'
              + '<button type="button" class="text-btn delete-post-btn">ì‚­ì œ</button>';
            const body = card.querySelector('.post-body');
            body.appendChild(tools);
          }
        });

        if (currentPostId && posts[currentPostId]) {
          const post = posts[currentPostId];
          const isOwner = currentUser && post.author === currentUser.nickname;
          detailEditBtn.classList.toggle('hidden', !isOwner);
          detailDeleteBtn.classList.toggle('hidden', !isOwner);
        } else {
          detailEditBtn.classList.add('hidden');
          detailDeleteBtn.classList.add('hidden');
        }
      }

      function toggleLikeForPost(postId) {
        const post = posts[postId];
        if (!post) return;

        const newState = !post.likedByCurrentUser;
        post.likedByCurrentUser = newState;
        post.likeCount = Math.max(0, (post.likeCount || 0) + (newState ? 1 : -1));

        const mainCard = document.querySelector('#feed-list .post-card[data-id="' + postId + '"]');
        if (mainCard) {
          const likeBtn = mainCard.querySelector('.like-btn');
          if (likeBtn) {
            likeBtn.setAttribute('data-liked', newState ? 'true' : 'false');
            const icon = likeBtn.querySelector('.like-icon');
            const countSpan = likeBtn.querySelector('.like-count');
            if (icon) icon.textContent = newState ? 'â™¥' : 'â™¡';
            if (countSpan) countSpan.textContent = post.likeCount;
          }
        }

        const collectionLikeBtns = document.querySelectorAll('#my-collection-section .post-card[data-id="' + postId + '"] .like-btn');
        collectionLikeBtns.forEach(btn => {
          btn.setAttribute('data-liked', newState ? 'true' : 'false');
          const icon = btn.querySelector('.like-icon');
          const countSpan = btn.querySelector('.like-count');
          if (icon) icon.textContent = newState ? 'â™¥' : 'â™¡';
          if (countSpan) countSpan.textContent = post.likeCount;
        });

        if (detailLikeBtn && currentPostId === postId) {
          detailLikeBtn.setAttribute('data-liked', newState ? 'true' : 'false');
          const icon = detailLikeBtn.querySelector('.like-icon');
          const countSpan = detailLikeBtn.querySelector('.like-count');
          if (icon) icon.textContent = newState ? 'â™¥' : 'â™¡';
          if (countSpan) countSpan.textContent = post.likeCount;
        }

        applySort();
        renderHomeTopBrags();
        renderHomeRecommendations();
      }

      function openDetail(postId) {
        const post = posts[postId];
        if (!post) return;

        currentPostId = postId;

        const image = post.imageUrl || '';
        detailImage.style.backgroundImage = image ? "url('" + image + "')" : '';

        detailCategory.textContent = post.categoryLabel || 'ì¹´í…Œê³ ë¦¬';
        detailHitBadge.classList.toggle('hidden', !post.isHit);
        detailTitle.textContent = post.title || '';
        detailDesc.textContent = post.oneLiner || '';
        detailBody.textContent = post.body || '';

        const avatarInitial = getAvatarInitial(post.author);
        detailAvatar.textContent = avatarInitial;
        detailNickname.textContent = post.author || '';

        const isDealer = isDealerNickname(post.author);
        const userTypeLabel = isDealer ? 'ë”œëŸ¬' : 'ì»¬ë ‰í„°';
        detailSubtext.textContent = post.categoryLabel + ' Â· ' + userTypeLabel;

        if (detailUserInline) {
          detailUserInline.dataset.nickname = post.author || '';
        }

        detailLikeBtn.setAttribute('data-liked', post.likedByCurrentUser ? 'true' : 'false');
        detailLikeBtn.querySelector('.like-icon').textContent = post.likedByCurrentUser ? 'â™¥' : 'â™¡';
        detailLikeBtn.querySelector('.like-count').textContent = post.likeCount || 0;

        renderComments();

        const isOwner = currentUser && post.author === currentUser.nickname;
        detailEditBtn.classList.toggle('hidden', !isOwner);
        detailDeleteBtn.classList.toggle('hidden', !isOwner);

        showOnlySection('detail-section');
        activateNavFor('feed-section');
      }

      function renderComments() {
        commentList.innerHTML = '';
        if (!currentPostId) {
          const li = document.createElement('li');
          li.className = 'comment-empty';
          li.textContent = 'ê²Œì‹œê¸€ì„ ì„ íƒí•˜ë©´ ëŒ“ê¸€ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
          commentList.appendChild(li);
          return;
        }

        const comments = commentsByPostId[currentPostId] || [];
        if (!comments.length) {
          const li = document.createElement('li');
          li.className = 'comment-empty';
          li.textContent = 'ì²« ëŒ“ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”.';
          commentList.appendChild(li);
          return;
        }

        comments.forEach(c => {
          const li = document.createElement('li');
          li.className = 'comment-item';
          li.innerHTML =
            '<div class="comment-header">'
            + '<span class="nickname">' + c.nickname + '</span>'
            + '<span class="date">' + c.when + '</span>'
            + '</div>'
            + '<p class="comment-body">' + c.text + '</p>'
            + '<button type="button" class="text-btn report-comment-btn">ì‹ ê³ </button>';
          commentList.appendChild(li);
        });

        applyBlockFilter();
      }

      function searchPostByCategoryAndId() {
        if (!categoryIdInput) return;
        const category = categoryIdSelect ? (categoryIdSelect.value || '').trim() : '';
        const raw = categoryIdInput.value.trim();
        if (!raw) {
          alert('ì•„ì´ë””ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
          return;
        }

        let targetId = raw;
        if (!raw.includes('-') && category) {
          targetId = category + '-' + raw;
        }

        const post = posts[targetId];
        if (!post) {
          alert('í•´ë‹¹ ì•„ì´ë””ì˜ ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (ì˜ˆ: arttoy-1)');
          return;
        }

        openDetail(targetId);
      }

      function renderMyCollections() {
        if (!currentUser) return;
        const nick = currentUser.nickname;

        myPostsContainer.innerHTML = '';
        likedPostsContainer.innerHTML = '';

        let myCount = 0;
        let likedCount = 0;

        Object.keys(posts).forEach(id => {
          const post = posts[id];
          if (post.author === nick) {
            const card = renderPostCard(post);
            myPostsContainer.appendChild(card);
            myCount++;
          }
          if (post.likedByCurrentUser) {
            const card = renderPostCard(post);
            likedPostsContainer.appendChild(card);
            likedCount++;
          }
        });

        if (myCount === 0) {
          const p = document.createElement('p');
          p.className = 'empty-text';
          p.textContent = 'ì•„ì§ ì˜¬ë¦° ìë‘ê¸€ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ê¸€ì„ ì˜¬ë ¤ë³´ì„¸ìš”!';
          myPostsContainer.appendChild(p);
        }

        if (likedCount === 0) {
          const p = document.createElement('p');
          p.className = 'empty-text';
          p.textContent = 'ì¢‹ì•„ìš”í•œ ê¸€ì´ ì—¬ê¸°ì— ëª¨ì…ë‹ˆë‹¤.';
          likedPostsContainer.appendChild(p);
        }

        refreshOwnerToolsForAllCards();
        applySearchFilter();
        applyBlockFilter();
      }

      function startEditPost(postId) {
        const post = posts[postId];
        if (!post) return;
        if (!currentUser) {
          alert('ë¡œê·¸ì¸ í›„ ì´ìš©í•´ ì£¼ì„¸ìš”.');
          return;
        }
        if (post.author !== currentUser.nickname) {
          alert('ë³¸ì¸ì´ ì˜¬ë¦° ê¸€ë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
          return;
        }

        editingPostId = postId;
        submitPostBtn.textContent = 'ìˆ˜ì • ì™„ë£Œ';

        newCategorySelect.value = post.category;
        newTitleInput.value = post.title || '';
        newDescInput.value = post.oneLiner || '';
        newBodyInput.value = post.body || '';
        newImageInput.value = '';

        // NEW: Show existing image in preview
        if (post.imageUrl) {
          imagePreview.src = post.imageUrl;
          previewContainer.classList.remove('hidden');
        } else {
          previewContainer.classList.add('hidden');
          imagePreview.src = '';
        }

        showOnlySection('new-post-section');
        activateNavFor('new-post-section');
      }

      function deletePost(postId) {
        const post = posts[postId];
        if (!post) return;
        if (!currentUser) {
          alert('ë¡œê·¸ì¸ í›„ ì´ìš©í•´ ì£¼ì„¸ìš”.');
          return;
        }
        if (post.author !== currentUser.nickname) {
          alert('ë³¸ì¸ì´ ì˜¬ë¦° ê¸€ë§Œ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
          return;
        }

        if (!confirm('ì •ë§ ì´ ìë‘ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;

        delete posts[postId];
        delete commentsByPostId[postId];

        const mainCard = document.querySelector('#feed-list .post-card[data-id="' + postId + '"]');
        if (mainCard) mainCard.remove();

        if (currentPostId === postId) {
          currentPostId = null;
          showOnlySection('feed-section');
          activateNavFor('feed-section');
        }

        if (editingPostId === postId) {
          editingPostId = null;
          newPostForm.reset();
          submitPostBtn.textContent = 'ì»¤ë®¤ë‹ˆí‹°ì— ì˜¬ë¦¬ê¸°';
          // NEW: Reset preview
          previewContainer.classList.add('hidden');
          imagePreview.src = '';
        }

        if (!document.getElementById('my-collection-section').classList.contains('hidden')) {
          renderMyCollections();
        }

        applySearchFilter();
        renderHomeTopBrags();
        renderHomeRecommendations();
      }

      function setActiveFeedTab(tab) {
        currentHitFilter = tab;
        if (feedTabButtons && feedTabButtons.length) {
          feedTabButtons.forEach(b => {
            const val = b.dataset.feedTab || 'all';
            b.classList.toggle('active', val === tab);
          });
        }
        applyHitFilter();
        applySort();
        applySearchFilter();
        applyBlockFilter();
      }

      // ë¡œê·¸ì¸ ì²˜ë¦¬
      loginForm.addEventListener('submit', function (e) {
        e.preventDefault();

        const emailInput = document.getElementById('login-email');
        const passwordInput = document.getElementById('login-password');
        const nicknameField = nicknameInput;

        if (!emailInput.value.trim()) {
          emailInput.value = 'gsss@ddd.com';
        }
        if (!passwordInput.value.trim()) {
          passwordInput.value = '1111';
        }
        if (!nicknameField.value.trim()) {
          nicknameField.value = 'ã…‡ã…‡ã…‡';
        }

        const email = emailInput.value.trim();
        const password = passwordInput.value.trim();
        const nickname = nicknameField.value.trim();
        const role = document.querySelector('input[name="role"]:checked')?.value || 'buyer';

        currentUser = {
          email,
          nickname,
          role
        };

        nicknameLabels.forEach(span => {
          span.textContent = nickname;
        });

        roleLabel.textContent = role === 'seller'
          ? 'íŒë§¤ì(ë”œëŸ¬)'
          : 'êµ¬ë§¤ì(ì»¬ë ‰í„°)';

        hitShareBtn.classList.toggle('hidden', role !== 'seller');

        commentInput.placeholder =
          nickname + ' ë‹˜ì˜ ë‹‰ë„¤ì„ìœ¼ë¡œ ëŒ“ê¸€ì´ ë“±ë¡ë©ë‹ˆë‹¤.';

        loginPage.classList.add('hidden');
        app.classList.remove('hidden');

        refreshOwnerToolsForAllCards();
        renderHomeRecommendations();
      });

      // ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜
      navLinks.forEach(btn => {
        btn.addEventListener('click', function () {
          const target = btn.dataset.target;
          if (!target) return;

          if (target === 'profile-section') {
            if (!currentUser) {
              alert('ë¡œê·¸ì¸ í›„ ì´ìš©í•´ ì£¼ì„¸ìš”.');
              return;
            }
            openProfile(currentUser.nickname);
            return;
          }

          showOnlySection(target);
          activateNavFor(target);
          if (target === 'my-collection-section') {
            renderMyCollections();
          } else if (target === 'new-post-section') {
            newPostMode = 'brag';
          }
        });
      });

      // í™ˆì—ì„œ ì„¹ì…˜ ì í”„
      document.addEventListener('click', function (e) {
        const jumpBtn = e.target.closest('[data-jump]');
        if (jumpBtn) {
          const target = jumpBtn.getAttribute('data-jump');
          if (target) {
            showOnlySection(target);
            activateNavFor(target);
            if (target === 'my-collection-section') {
              renderMyCollections();
            }
          }
        }
      });

      // ìƒë‹¨ ê²€ìƒ‰
      if (searchInput) {
        searchInput.addEventListener('input', function () {
          applySearchFilter();
        });
      }

      // ì¹´í…Œê³ ë¦¬ + ì•„ì´ë”” ê²€ìƒ‰
      if (categoryIdSearchBtn) {
        categoryIdSearchBtn.addEventListener('click', function (e) {
          e.preventDefault();
          searchPostByCategoryAndId();
        });
      }

      if (categoryIdInput) {
        categoryIdInput.addEventListener('keydown', function (e) {
          if (e.key === 'Enter') {
            e.preventDefault();
            searchPostByCategoryAndId();
          }
        });
      }

      // ì¹´í…Œê³ ë¦¬ í•„í„°
      categoryChips.forEach(chip => {
        chip.addEventListener('click', function () {
          const category = chip.dataset.category || 'all';
          currentCategoryFilter = category;
          categoryChips.forEach(c =>
            c.classList.toggle('active', c === chip)
          );
          applyCategoryFilter();
          applySearchFilter();
        });
      });

      // í”¼ë“œ íƒ­ (ì „ì²´ / ìë‘ / HIT ê³µìœ  / íŒ”ë¡œìš° ë”œëŸ¬)
      if (feedTabButtons && feedTabButtons.length) {
        feedTabButtons.forEach(btn => {
          btn.addEventListener('click', function () {
            const tab = btn.dataset.feedTab || 'all';
            setActiveFeedTab(tab);
          });
        });
      }

      // ì •ë ¬ ë“œë¡­ë‹¤ìš´
      if (feedSortSelect) {
        feedSortSelect.addEventListener('change', function () {
          const value = feedSortSelect.value;
          if (value === 'hitOnly') {
            setActiveFeedTab('hit');
          } else {
            currentSort = value || 'latest';
            applySort();
            applySearchFilter();
            applyBlockFilter();
          }
        });
      }

      // ì‹ ê³  ëª¨ë‹¬ ë²„íŠ¼
      if (reportCancelBtn) {
        reportCancelBtn.addEventListener('click', function () {
          closeReportModal();
        });
      }

      if (reportSubmitBtn) {
        reportSubmitBtn.addEventListener('click', function () {
          if (!reportModal) return;
          const checked = reportModal.querySelector('input[name="report-reason"]:checked');
          const reason = checked ? checked.value : '';
          closeReportModal();
          if (reason) {
            alert('ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. (ì‚¬ìœ : ' + reason + ')');
          } else {
            alert('ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.');
          }
        });
      }

      if (reportModal) {
        reportModal.addEventListener('click', function (e) {
          if (e.target === reportModal) {
            closeReportModal();
          }
        });
      }

      // í”„ë¡œí•„ íŒ”ë¡œìš° / ì°¨ë‹¨ ë²„íŠ¼
      if (profileFollowBtn) {
        profileFollowBtn.addEventListener('click', function () {
          if (!currentUser || !currentProfileNickname) {
            alert('ë¡œê·¸ì¸ í›„ ì´ìš©í•´ ì£¼ì„¸ìš”.');
            return;
          }
          if (currentUser.nickname === currentProfileNickname) return;

          const isDealer = isDealerNickname(currentProfileNickname);
          let followed = false;
          if (isDealer) {
            followed = followingDealers.has(currentProfileNickname);
            if (followed) {
              followingDealers.delete(currentProfileNickname);
            } else {
              followingDealers.add(currentProfileNickname);
            }
          } else {
            followed = followingUsers.has(currentProfileNickname);
            if (followed) {
              followingUsers.delete(currentProfileNickname);
            } else {
              followingUsers.add(currentProfileNickname);
            }
          }

          const nowFollowed = isDealer
            ? followingDealers.has(currentProfileNickname)
            : followingUsers.has(currentProfileNickname);
          profileFollowBtn.textContent = nowFollowed
            ? 'íŒ”ë¡œìš° ì·¨ì†Œ'
            : isDealer
              ? 'ë”œëŸ¬ íŒ”ë¡œìš°'
              : 'ì‚¬ìš©ì íŒ”ë¡œìš°';

          applyHitFilter();
          applySearchFilter();
        });
      }

      if (profileBlockBtn) {
        profileBlockBtn.addEventListener('click', function () {
          if (!currentUser || !currentProfileNickname) {
            alert('ë¡œê·¸ì¸ í›„ ì´ìš©í•´ ì£¼ì„¸ìš”.');
            return;
          }
          if (currentUser.nickname === currentProfileNickname) return;

          const blocked = blockedUsers.has(currentProfileNickname);
          if (blocked) {
            blockedUsers.delete(currentProfileNickname);
          } else {
            blockedUsers.add(currentProfileNickname);
          }

          profileBlockBtn.textContent = blocked
            ? 'ì°¨ë‹¨í•˜ê¸°'
            : 'ì°¨ë‹¨ í•´ì œ';

          applyBlockFilter();
          renderHomeTopBrags();
          renderHomeRecommendations();
        });
      }

      // ê³ ì • ê³µì§€ â†’ ê·œì¹™ ë³´ëŸ¬ê°€ê¸°
      if (pinnedDetailBtn) {
        pinnedDetailBtn.addEventListener('click', function () {
          showOnlySection('home-section');
          activateNavFor('home-section');
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      }

      // ì „ì—­ í´ë¦­ ì´ë²¤íŠ¸ (ì¢‹ì•„ìš”, ìƒì„¸, ìˆ˜ì •, ì‚­ì œ, í”„ë¡œí•„, ì‹ ê³ , TOP ì¹´ë“œ)
      document.addEventListener('click', function (e) {
        const likeBtn = e.target.closest('.like-btn');
        if (likeBtn) {
          if (likeBtn === detailLikeBtn) {
            if (currentPostId) {
              toggleLikeForPost(currentPostId);
            }
          } else {
            const card = likeBtn.closest('.post-card');
            if (card) {
              const postId = card.dataset.id;
              toggleLikeForPost(postId);
            }
          }
          return;
        }

        const detailBtn = e.target.closest('.open-detail-btn');
        if (detailBtn) {
          const card = detailBtn.closest('.post-card');
          if (card) {
            const postId = card.dataset.id;
            openDetail(postId);
          }
          return;
        }

        const editBtn = e.target.closest('.edit-post-btn');
        if (editBtn) {
          let postId = null;
          const card = editBtn.closest('.post-card');
          if (card) {
            postId = card.dataset.id;
          } else if (currentPostId) {
            postId = currentPostId;
          }
          if (postId) startEditPost(postId);
          return;
        }

        const deleteBtn = e.target.closest('.delete-post-btn');
        if (deleteBtn) {
          let postId = null;
          const card = deleteBtn.closest('.post-card');
          if (card) {
            postId = card.dataset.id;
          } else if (currentPostId) {
            postId = currentPostId;
          }
          if (postId) deletePost(postId);
          return;
        }

        const profileLinkEl = e.target.closest('.profile-link');
        if (profileLinkEl) {
          const nickname = profileLinkEl.dataset.nickname
            || profileLinkEl.querySelector('.nickname')?.textContent.trim();
          if (nickname) {
            openProfile(nickname);
          }
          return;
        }

        const topBragCard = e.target.closest('.top-brag-card');
        if (topBragCard) {
          const postId = topBragCard.dataset.id;
          if (postId) {
            openDetail(postId);
          }
          return;
        }

        const reportPostBtn = e.target.closest('.report-post-btn');
        if (reportPostBtn) {
          let postId = null;
          let nickname = null;
          const card = reportPostBtn.closest('.post-card');
          if (card) {
            postId = card.dataset.id;
            nickname = card.dataset.author || '';
          } else if (currentPostId) {
            postId = currentPostId;
            if (posts[currentPostId]) {
              nickname = posts[currentPostId].author || '';
            }
          }
          openReportModal({
            type: 'post',
            postId,
            nickname
          });
          return;
        }

        const reportCommentBtn = e.target.closest('.report-comment-btn');
        if (reportCommentBtn) {
          const item = reportCommentBtn.closest('.comment-item');
          if (item) {
            const nicknameEl = item.querySelector('.nickname');
            const nick = nicknameEl ? nicknameEl.textContent.trim() : '';
            openReportModal({
              type: 'comment',
              nickname: nick
            });
          }
          return;
        }
      });

      // ìƒì„¸ â†’ ë’¤ë¡œ
      backToFeedBtn.addEventListener('click', function () {
        showOnlySection('feed-section');
        activateNavFor('feed-section');
      });

      // ëŒ“ê¸€ ë“±ë¡
      commentForm.addEventListener('submit', function (e) {
        e.preventDefault();
        if (!currentUser) {
          alert('ë¡œê·¸ì¸ í›„ ëŒ“ê¸€ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
          return;
        }
        if (!currentPostId) {
          alert('ëŒ“ê¸€ì„ ë‹¬ ê²Œì‹œê¸€ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
          return;
        }
        const text = commentInput.value.trim();
        if (!text) return;

        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const hour = String(now.getHours()).padStart(2, '0');
        const minute = String(now.getMinutes()).padStart(2, '0');
        const when = year + '-' + month + '-' + day + ' ' + hour + ':' + minute;

        const list = commentsByPostId[currentPostId] ||
          (commentsByPostId[currentPostId] = []);
        list.push({
          nickname: currentUser.nickname,
          text,
          when
        });

        commentInput.value = '';

        if (posts[currentPostId]) {
          posts[currentPostId].commentCount = (posts[currentPostId].commentCount || 0) + 1;
          const mainCard = document.querySelector('#feed-list .post-card[data-id="' + currentPostId + '"]');
          if (mainCard) {
            const btn = mainCard.querySelector('.open-detail-btn');
            if (btn) {
              btn.textContent = 'ğŸ’¬ ' + posts[currentPostId].commentCount;
            }
          }
        }

        renderComments();
        applySort();
      });

      // Image Preview Listener
      if (newImageInput) {
        newImageInput.addEventListener('change', function () {
          const file = this.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
              imagePreview.src = e.target.result;
              previewContainer.classList.remove('hidden');
            };
            reader.readAsDataURL(file);
          } else {
            if (editingPostId && posts[editingPostId] && posts[editingPostId].imageUrl) {
              imagePreview.src = posts[editingPostId].imageUrl;
              previewContainer.classList.remove('hidden');
            } else {
              previewContainer.classList.add('hidden');
              imagePreview.src = '';
            }
          }
        });
      }

      // ìë‘ ê¸€ì“°ê¸° (ë“±ë¡ & ìˆ˜ì •)
      newPostForm.addEventListener('submit', function (e) {
        e.preventDefault();
        if (!currentUser) {
          alert('ë¡œê·¸ì¸ í›„ ì´ìš©í•´ ì£¼ì„¸ìš”.');
          return;
        }

        const category = newCategorySelect.value;
        const title = newTitleInput.value.trim();
        const oneLiner = newDescInput.value.trim();
        const body = newBodyInput.value.trim();
        const file = newImageInput.files[0];

        if (!title || !oneLiner) {
          alert('ì œëª©ê³¼ í•œ ì¤„ ìë‘ì„ ëª¨ë‘ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
          return;
        }

        const finalize = function (imageUrl) {
          if (editingPostId) {
            const post = posts[editingPostId];
            if (!post) return;

            post.category = category;
            post.categoryLabel = CATEGORY_CONFIG[category] || 'ê¸°íƒ€';
            post.title = title;
            post.oneLiner = oneLiner;
            post.body = body;
            if (imageUrl) {
              post.imageUrl = imageUrl;
            }

            const mainCard = document.querySelector('#feed-list .post-card[data-id="' + editingPostId + '"]');
            if (mainCard) {
              mainCard.dataset.category = post.category;
              mainCard.dataset.categoryLabel = post.categoryLabel;
              mainCard.dataset.oneLiner = post.oneLiner;
              mainCard.dataset.body = post.body;
              mainCard.dataset.image = post.imageUrl || '';

              const imgEl = mainCard.querySelector('.post-image');
              if (imgEl) imgEl.style.backgroundImage = 'url(\'' + (post.imageUrl || '') + '\')';

              const titleEl = mainCard.querySelector('.post-title');
              if (titleEl) titleEl.textContent = post.title;

              const descEl = mainCard.querySelector('.post-desc');
              if (descEl) {
                const descText = post.body
                  ? post.oneLiner + ' Â· ' + (post.body.length > 40 ? post.body.substring(0, 40) + 'â€¦' : post.body)
                  : post.oneLiner;
                descEl.textContent = descText;
              }

              const catPill = mainCard.querySelector('.category-pill');
              if (catPill) catPill.textContent = post.categoryLabel;
            }

            if (currentPostId === editingPostId) {
              openDetail(editingPostId);
            }
          } else {
            const newPost = {
              id: 'new-' + Date.now(),
              category: category,
              title: title,
              oneLiner: oneLiner,
              body: body,
              imageUrl: imageUrl,
              author: currentUser.nickname,
              likeCount: 0,
              commentCount: 0,
              isHit: false,
              createdAt: Date.now()
            };
            createPostFromData(newPost, true);
            const card = renderPostCard(posts[newPost.id]);
            feedList.insertBefore(card, feedList.firstChild);

            if (currentProfileNickname === currentUser.nickname) {
              openProfile(currentUser.nickname);
            }
          }

          newPostForm.reset();
          editingPostId = null;
          submitPostBtn.textContent = 'ì»¤ë®¤ë‹ˆí‹°ì— ì˜¬ë¦¬ê¸°';

          previewContainer.classList.add('hidden');
          imagePreview.src = '';

          showOnlySection('feed-section');
          activateNavFor('feed-section');
        };

        if (file) {
          const reader = new FileReader();
          reader.onload = function (e) {
            finalize(e.target.result);
          };
          reader.readAsDataURL(file);
        } else {
          let imgUrl = null;
          if (editingPostId && posts[editingPostId]) {
            imgUrl = posts[editingPostId].imageUrl;
          }
          finalize(imgUrl);
        }
      });

      // Initial mount
      mountInitialPosts();

    });
  </script>
  <script>
  (function() {
      if (window.self === window.top) return;
      document.addEventListener('DOMContentLoaded', function() {
          var loginPage = document.getElementById('login-page');
          var app = document.getElementById('app');
          if (loginPage) loginPage.classList.add('hidden');
          if (app) app.classList.remove('hidden');
          window.addEventListener('message', function(e) {
              if (e.data && e.data.type === 'USER_AUTH' && e.data.user) {
                  var nicknameEl = document.querySelector('.current-nickname');
                  var roleEl = document.getElementById('current-role-label');
                  if (nicknameEl) nicknameEl.textContent = e.data.user.nickname || 'ë‹‰ë„¤ì„';
                  if (roleEl) roleEl.textContent = (e.data.user.role === 'seller' ? 'ë”œëŸ¬' : 'ì»¬ë ‰í„°');
              }
          });
          window.parent.postMessage({ type: 'REQUEST_USER_AUTH' }, '*');
      });
  })();
  </script>
</body>

</html>